{"version":3,"sources":["views/app-views/machine-and-sensor/sensor-analysis/index.js","assets/images/Mask group.png"],"names":["Option","Select","SensorAnalysis","_metricConfig$selecte","_metricConfig$selecte2","_metricConfig$selecte3","isFreeUser","parseInt","localStorage","getItem","history","useHistory","machineId","sensorId","useParams","mainChartRef","useRef","spectrumChartRef","spectrumChartRefX","multiSpectrum3AxisRefX","multiSpectrum1AxisRef","selectedMetricType","setSelectedMetricType","useState","selectedAxis","setSelectedAxis","selectedAlarm","setSelectedAlarm","sensorsData","setSensorsData","selectorDate","setSelectorDate","dateRangeModal","setDateRangeModal","modalStartDate","setModalStartDate","modalEndDate","setModalEndDate","startDate","setStartDate","moment","subtract","format","endDate","setEndDate","rawData","setRawData","loading","setLoading","mid_freq_acceleration_p2p_x","setMid_freq_acceleration_p2p_x","mid_freq_acceleration_p2p_y","setMid_freq_acceleration_p2p_y","mid_freq_acceleration_p2p_z","setMid_freq_acceleration_p2p_z","high_freq_acceleration_p2p_x","setHigh_freq_acceleration_p2p_x","mid_freq_displacement_x","setMid_freq_displacement_x","mid_freq_displacement_y","setMid_freq_displacement_y","mid_freq_displacement_z","setMid_freq_displacement_z","mid_freq_velocity_x","setMid_freq_velocity_x","mid_freq_velocity_y","setMid_freq_velocity_y","mid_freq_velocity_z","setMid_freq_velocity_z","mid_freq_env_x","setMid_freq_env_x","mid_freq_env_y","setMid_freq_env_y","mid_freq_env_z","setMid_freq_env_z","inclination_x","setInclination_x","inclination_y","setInclination_y","inclination_z","setInclination_z","motorServiceTemperature","setMotorServiceTemperature","batteryPercentage","setBatteryPercentage","batteryVoltage","setBatteryVoltage","rssi","setRssi","lastZoomTime","setLastZoomTime","current","spectrumData","setSpectrumData","spectrumLoading","setSpectrumLoading","selectedPoint","setSelectedPoint","showSpectrum","setShowSpectrum","is3AxisSpectrum","setIs3AxisSpectrum","spectrumDataX","setSpectrumDataX","spectrumDataY","setSpectrumDataY","spectrumDataZ","setSpectrumDataZ","hasMultipleSpectrums","setHasMultipleSpectrums","spectrum3AxisData","setSpectrum3AxisData","x","y","z","spectrum1AxisData","setSpectrum1AxisData","availableFiles","setAvailableFiles","machineData","setMachineData","harmonicFrequencies","setHarmonicFrequencies","metricConfig","label","axes","unit","colors","fileMapping","getFileAvailabilityStatus","dataIndex","length","record","hasFile0","file_0","trim","hasFile1","file_1","getFileAvailabilityColor","status","fetchAllSpectrumData","async","console","log","pointData","message","error","findIndex","item","datetime","recordData","files","push","type","path","spectrumPromises","map","file","fetchSingleSpectrumData","spectrumResults","Promise","all","has3Axis","has1Axis","tempSpectrum3AxisData","tempSpectrum1AxisData","forEach","result","index","success","data","x_axis","parseFloat","y_axis","z_axis","binFilePath","expectedType","cleanBinFile","replace","apiUrl","axiosInstance","get","convertToHighchartsData","useCallback","Date","getTime","convertSpectrumToHighchartsData","getTop4Peaks","machineRpm","baseFreq","multiplier","targetFreq","amplitude","reduce","closest","point","freq","amp","Math","abs","frequency","color","createMainChart","title","window","Highcharts","chart","destroy","chartData","fileAvailabilityData","availabilityStatus","pointerColor","stockChart","height","text","xAxis","yAxis","series","name","events","click","e","pointIndex","this","originalData","marker","enabled","symbol","radius","states","hover","showInLegend","enableMouseTracking","tooltip","pointFormatter","xDateFormat","shared","plotOptions","line","legend","align","verticalAlign","layout","itemStyle","fontSize","createSpectrumChart","slice","harmonics","rpm","harmonic","width","value","dashStyle","style","fontWeight","fillColor","lineColor","lineWidth","pointFormat","zoomType","lineWidthPlus","scatter","create3AxisSpectrumCharts","dataX","dataY","dataZ","plotLines","harmonicSeries","subtitle","gridLineWidth","crosshairs","formatter","toFixed","points","createMultiSpectrumCharts","spectrum3Axis","spectrum1Axis","harmonics1Axis","useEffect","fetchMachineData","fetchSensorsData","fetchSensorData","machine","response","items","sensor_id","start_date","end_date","_item$file_","toDate","extraValue","_item$file_2","file_2","_item$file_3","_item$file_4","high_freq_acceleration_p2p_z","_item$file_5","_item$file_6","_item$file_7","_item$file_8","_item$file_9","_item$file_10","_item$file_11","_item$file_12","_item$file_13","_item$file_14","_item$file_15","_item$file_16","temperature","battery_percentage","battery_voltage","RSSI","_currentConfig$colors","currentConfig","currentColor","currentUnit","chartTitle","toUpperCase","setTimeout","_jsxs","padding","children","_jsx","marginBottom","Button","onClick","Card","display","alignItems","gap","src","SeriesImage","alt","disabled","url","API_BASE_URL","open","download","onChange","start","end","placeholder","setItem","sensor_type","sensor_id_label","justifyContent","size","background","borderRadius","_Fragment","overflowX","ref","flex","flexShrink","border","textAlign","peak","paddingRight","flexDirection","Object","entries","_ref","key","config","_metricConfig$value","availableAxes","handleMetricTypeChange","cursor","backgroundColor","transition","filter","axis","_metricConfig$selecte4","_metricConfig$selecte5","minWidth","Modal","visible","onOk","handleDateRangeSubmit","onCancel","DatePicker","showTime","date","marginTop"],"mappings":"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","file":"static/js/55.420dfd1d.chunk.js","sourcesContent":["import React, { useState, useEffect, useMemo, useCallback, useRef } from \"react\";\r\nimport { Card, Button, Select, Modal, DatePicker, message } from \"antd\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport { axiosInstance } from \"App\";\r\nimport { API_BASE_URL } from \"constants/ApiConstant\";\r\nimport SeriesImage from \"assets/images/Mask group.png\";\r\n\r\nconst { Option } = Select;\r\n\r\nconst SensorAnalysis = () => {\r\n  // Check if current user is a free user (role id 5)\r\n  const userRole = parseInt(localStorage.getItem(\"role\"));\r\n  const isFreeUser = userRole === 5;\r\n  const history = useHistory();\r\n  const { machineId, sensorId } = useParams();\r\n\r\n  // Highcharts chart refs\r\n  const mainChartRef = useRef(null);\r\n  const spectrumChartRef = useRef(null);\r\n  \r\n  // 3-axis spectrum chart refs for _0.bin files\r\n  const spectrumChartRefX = useRef(null);\r\n  const spectrumChartRefY = useRef(null);\r\n  const spectrumChartRefZ = useRef(null);\r\n  \r\n  // Multi-spectrum chart refs (for cases with both 3-axis and 1-axis)\r\n  const multiSpectrum3AxisRefX = useRef(null);\r\n  const multiSpectrum3AxisRefY = useRef(null);\r\n  const multiSpectrum3AxisRefZ = useRef(null);\r\n  const multiSpectrum1AxisRef = useRef(null);\r\n  const [selectedMetricType, setSelectedMetricType] = useState(\"mid_freq_acceleration_p2p\");\r\n  const [selectedAxis, setSelectedAxis] = useState(\"x\");\r\n  const [selectedAlarm, setSelectedAlarm] = useState(sensorId);\r\n  const [sensorsData, setSensorsData] = useState([]);\r\n  const [selectorDate, setSelectorDate] = useState(\"1\");\r\n  const [dateRangeModal, setDateRangeModal] = useState(false);\r\n  const [modalStartDate, setModalStartDate] = useState(null);\r\n  const [modalEndDate, setModalEndDate] = useState(null);\r\n  const [startDate, setStartDate] = useState(moment().subtract(1, 'days').format('YYYY-MM-DD hh:mm:ss'));\r\n  const [endDate, setEndDate] = useState(moment().format('YYYY-MM-DD hh:mm:ss'));\r\n  const [rawData, setRawData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Analysis data states\r\n  const [mid_freq_acceleration_p2p_x, setMid_freq_acceleration_p2p_x] = useState([]);\r\n  const [mid_freq_acceleration_p2p_y, setMid_freq_acceleration_p2p_y] = useState([]);\r\n  const [mid_freq_acceleration_p2p_z, setMid_freq_acceleration_p2p_z] = useState([]);\r\n  const [high_freq_acceleration_p2p_x, setHigh_freq_acceleration_p2p_x] = useState([]);\r\n\r\n  const [mid_freq_displacement_x, setMid_freq_displacement_x] = useState([]);\r\n  const [mid_freq_displacement_y, setMid_freq_displacement_y] = useState([]);\r\n  const [mid_freq_displacement_z, setMid_freq_displacement_z] = useState([]);\r\n\r\n  const [mid_freq_velocity_x, setMid_freq_velocity_x] = useState([]);\r\n  const [mid_freq_velocity_y, setMid_freq_velocity_y] = useState([]);\r\n  const [mid_freq_velocity_z, setMid_freq_velocity_z] = useState([]);\r\n\r\n  const [mid_freq_env_x, setMid_freq_env_x] = useState([]);\r\n  const [mid_freq_env_y, setMid_freq_env_y] = useState([]);\r\n  const [mid_freq_env_z, setMid_freq_env_z] = useState([]);\r\n\r\n  const [inclination_x, setInclination_x] = useState([]);\r\n  const [inclination_y, setInclination_y] = useState([]);\r\n  const [inclination_z, setInclination_z] = useState([]);\r\n\r\n  const [motorServiceTemperature, setMotorServiceTemperature] = useState([]);\r\n  const [batteryPercentage, setBatteryPercentage] = useState([]);\r\n  const [batteryVoltage, setBatteryVoltage] = useState([]);\r\n  const [rssi, setRssi] = useState([]);\r\n  const [lastZoomTime, setLastZoomTime] = useState({ current: 0 });\r\n\r\n  // Spectrum chart states\r\n  const [spectrumData, setSpectrumData] = useState([]);\r\n  const [spectrumLoading, setSpectrumLoading] = useState(false);\r\n  const [selectedPoint, setSelectedPoint] = useState(null);\r\n  const [showSpectrum, setShowSpectrum] = useState(false);\r\n  \r\n  // 3-axis spectrum data for _0.bin files\r\n  const [is3AxisSpectrum, setIs3AxisSpectrum] = useState(false);\r\n  const [spectrumDataX, setSpectrumDataX] = useState([]);\r\n  const [spectrumDataY, setSpectrumDataY] = useState([]);\r\n  const [spectrumDataZ, setSpectrumDataZ] = useState([]);\r\n\r\n  // Multiple spectrum data (for records that have both _0.bin and _1.bin files)\r\n  const [hasMultipleSpectrums, setHasMultipleSpectrums] = useState(false);\r\n  const [spectrum3AxisData, setSpectrum3AxisData] = useState({ x: [], y: [], z: [] });\r\n  const [spectrum1AxisData, setSpectrum1AxisData] = useState([]);\r\n  const [availableFiles, setAvailableFiles] = useState([]);\r\n  \r\n  // Machine data and harmonics\r\n  const [machineData, setMachineData] = useState(null);\r\n  const [harmonicFrequencies, setHarmonicFrequencies] = useState([]);\r\n\r\n  // Metric configuration\r\n  const metricConfig = {\r\n    \"mid_freq_acceleration_p2p\": {\r\n      label: \"Mid Freq Acceleration\",\r\n      axes: [\"x\", \"y\", \"z\"],\r\n      unit: \"(mm/s²)\",\r\n      colors: { x: \"#ef4444\", y: \"#3b82f6\", z: \"#10b981\" },\r\n      fileMapping: { x: \"file_1\", y: \"file_2\", z: \"file_0\" }\r\n    },\r\n    \"high_freq_acceleration_p2p\": {\r\n      label: \"High Freq Acceleration\", \r\n      axes: [\"z\"],\r\n      unit: \"(mm/s²)\",\r\n      colors: { z: \"#f59e0b\" },\r\n      fileMapping: { z: \"file_0\" }\r\n    },\r\n    \"mid_freq_velocity\": {\r\n      label: \"Mid Freq Velocity\",\r\n      axes: [\"x\", \"y\", \"z\"],\r\n      unit: \"(mm/s)\",\r\n      colors: { x: \"#ef4444\", y: \"#3b82f6\", z: \"#10b981\" },\r\n      fileMapping: { x: \"file_1\", y: \"file_2\", z: \"file_0\" }\r\n    },\r\n    \"mid_freq_displacement\": {\r\n      label: \"Mid Freq Displacement\",\r\n      axes: [\"x\", \"y\", \"z\"],\r\n      unit: \"(μm)\",\r\n      colors: { x: \"#ef4444\", y: \"#3b82f6\", z: \"#10b981\" },\r\n      fileMapping: { x: \"file_1\", y: \"file_2\", z: \"file_0\" }\r\n    },\r\n    \"inclination\": {\r\n      label: \"Inclination\",\r\n      axes: [\"x\", \"y\", \"z\"],\r\n      unit: \"(degrees)\",\r\n      colors: { x: \"#ef4444\", y: \"#3b82f6\", z: \"#10b981\" },\r\n      fileMapping: { x: \"file_1\", y: \"file_2\", z: \"file_0\" }\r\n    },\r\n    \"mid_freq_env\": {\r\n      label: \"Mid Freq Envelope\",\r\n      axes: [\"x\", \"y\", \"z\"],\r\n      unit: \"(Hz)\",\r\n      colors: { x: \"#ef4444\", y: \"#3b82f6\", z: \"#10b981\" },\r\n      fileMapping: { x: \"file_1\", y: \"file_2\", z: \"file_0\" }\r\n    },\r\n    \"temperature\": {\r\n      label: \"Temperature\",\r\n      axes: [\"\"],\r\n      unit: \"(°C)\",\r\n      colors: { \"\": \"#f59e0b\" },\r\n      fileMapping: { \"\": null }\r\n    },\r\n    \"battery_voltage\": {\r\n      label: \"Voltage\", \r\n      axes: [\"\"],\r\n      unit: \"(V)\",\r\n      colors: { \"\": \"#10b981\" },\r\n      fileMapping: { \"\": null }\r\n    },\r\n    \"battery_percentage\": {\r\n      label: \"Battery %\",\r\n      axes: [\"\"],\r\n      unit: \"(%)\",\r\n      colors: { \"\": \"#3b82f6\" },\r\n      fileMapping: { \"\": null }\r\n    },\r\n    \"RSSI\": {\r\n      label: \"RSSI\",\r\n      axes: [\"\"],\r\n      unit: \"(dBm)\",\r\n      colors: { \"\": \"#8b5cf6\" },\r\n      fileMapping: { \"\": null }\r\n    }\r\n  };\r\n\r\n  // Get current data based on selected metric and axis\r\n  const getCurrentChartData = () => {\r\n    const stateMap = {\r\n      \"mid_freq_acceleration_p2p_x\": mid_freq_acceleration_p2p_x,\r\n      \"mid_freq_acceleration_p2p_y\": mid_freq_acceleration_p2p_y,\r\n      \"mid_freq_acceleration_p2p_z\": mid_freq_acceleration_p2p_z,\r\n      \"high_freq_acceleration_p2p_z\": high_freq_acceleration_p2p_x,\r\n      \"mid_freq_velocity_x\": mid_freq_velocity_x,\r\n      \"mid_freq_velocity_y\": mid_freq_velocity_y,\r\n      \"mid_freq_velocity_z\": mid_freq_velocity_z,\r\n      \"mid_freq_displacement_x\": mid_freq_displacement_x,\r\n      \"mid_freq_displacement_y\": mid_freq_displacement_y,\r\n      \"mid_freq_displacement_z\": mid_freq_displacement_z,\r\n      \"inclination_x\": inclination_x,\r\n      \"inclination_y\": inclination_y,\r\n      \"inclination_z\": inclination_z,\r\n      \"mid_freq_env_x\": mid_freq_env_x,\r\n      \"mid_freq_env_y\": mid_freq_env_y,\r\n      \"mid_freq_env_z\": mid_freq_env_z,\r\n      \"temperature_\": motorServiceTemperature,\r\n      \"battery_voltage_\": batteryVoltage,\r\n      \"battery_percentage_\": batteryPercentage,\r\n      \"RSSI_\": rssi\r\n    };\r\n    \r\n    const key = `${selectedMetricType}_${selectedAxis}`;\r\n    return stateMap[key] || [];\r\n  };\r\n\r\n  // Get current metrics values for display\r\n  const getCurrentMetricsValues = () => {\r\n    if (rawData.length === 0) return {};\r\n    \r\n    const latestData = rawData[rawData.length - 1];\r\n    return {\r\n      temperature: latestData.temperature || \"N/A\",\r\n      battery_voltage: latestData.battery_voltage || \"N/A\", \r\n      battery_percentage: latestData.battery_percentage || \"N/A\",\r\n      rssi: latestData.rssi || \"N/A\"\r\n    };\r\n  };\r\n\r\n  // Get file availability status for a data point\r\n  const getFileAvailabilityStatus = (dataIndex) => {\r\n    if (!rawData || dataIndex >= rawData.length) return 'none';\r\n    \r\n    const record = rawData[dataIndex];\r\n    const hasFile0 = record.file_0 && record.file_0.trim() !== '';\r\n    const hasFile1 = record.file_1 && record.file_1.trim() !== '';\r\n    \r\n    if (hasFile0 && hasFile1) return 'both';\r\n    if (hasFile0) return 'mid-freq';\r\n    if (hasFile1) return 'high-freq';\r\n    return 'none';\r\n  };\r\n\r\n  // Get color for file availability status\r\n  const getFileAvailabilityColor = (status) => {\r\n    switch (status) {\r\n      case 'both': return '#10b981'; // Green - both analyses available\r\n      case 'mid-freq': return '#3b82f6'; // Blue - mid-frequency analysis only\r\n      case 'high-freq': return '#f59e0b'; // Orange - high-frequency analysis only\r\n      case 'none': return '#ef4444'; // Red - no analysis available\r\n      default: return '#9ca3af'; // Gray - unknown status\r\n    }\r\n  };\r\n\r\n  // Enhanced function to fetch multiple spectrum data for a single point\r\n  const fetchAllSpectrumData = async (pointData) => {\r\n    console.log('fetchAllSpectrumData called with pointData:', pointData);\r\n    \r\n    // Free users can only access limited spectrum analysis\r\n    if (isFreeUser) {\r\n      message.error(\"Advanced spectrum analysis is available for premium users only\");\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setSpectrumLoading(true);\r\n      \r\n      // Reset all spectrum states\r\n      setHasMultipleSpectrums(false);\r\n      setIs3AxisSpectrum(false);\r\n      setSpectrumData([]);\r\n      setSpectrum3AxisData({ x: [], y: [], z: [] });\r\n      setSpectrum1AxisData([]);\r\n      setAvailableFiles([]);\r\n      \r\n      // Check which files are available in the rawData for this point\r\n      const dataIndex = rawData.findIndex(item => \r\n        moment(item.datetime).format('YYYY-MM-DD HH:mm:ss') === moment(pointData.x).format('YYYY-MM-DD HH:mm:ss')\r\n      );\r\n      \r\n      if (dataIndex === -1) {\r\n        message.error(\"Could not find data record for this point\");\r\n        return;\r\n      }\r\n      \r\n      const recordData = rawData[dataIndex];\r\n      const files = [];\r\n      \r\n      // Check for available binary files\r\n      if (recordData.file_0 && recordData.file_0.trim() !== '') {\r\n        files.push({ type: '_0.bin', path: recordData.file_0, label: '3-axis mid-frequency' });\r\n      }\r\n      if (recordData.file_1 && recordData.file_1.trim() !== '') {\r\n        files.push({ type: '_1.bin', path: recordData.file_1, label: '1-axis high-frequency' });\r\n      }\r\n      \r\n      console.log('Available files for analysis:', files);\r\n      setAvailableFiles(files);\r\n      \r\n      if (files.length === 0) {\r\n        message.error(\"No binary files available for spectrum analysis\");\r\n        return;\r\n      }\r\n      \r\n      // Fetch spectrum data for all available files\r\n      const spectrumPromises = files.map(file => fetchSingleSpectrumData(file.path, file.type));\r\n      const spectrumResults = await Promise.all(spectrumPromises);\r\n      \r\n      // Process results\r\n      let has3Axis = false;\r\n      let has1Axis = false;\r\n      let tempSpectrum3AxisData = { x: [], y: [], z: [] };\r\n      let tempSpectrum1AxisData = [];\r\n      \r\n      spectrumResults.forEach((result, index) => {\r\n        if (result.success) {\r\n          if (result.axes === 3) {\r\n            has3Axis = true;\r\n            tempSpectrum3AxisData = {\r\n              x: result.data.x_axis.map(item => [parseFloat(item.x), parseFloat(item.y)]),\r\n              y: result.data.y_axis.map(item => [parseFloat(item.x), parseFloat(item.y)]),\r\n              z: result.data.z_axis.map(item => [parseFloat(item.x), parseFloat(item.y)])\r\n            };\r\n          } else if (result.axes === 1) {\r\n            has1Axis = true;\r\n            tempSpectrum1AxisData = result.data.map(item => [parseFloat(item.x), parseFloat(item.y)]);\r\n          }\r\n        } else {\r\n          console.error(`Failed to process ${files[index].path}:`, result.error);\r\n        }\r\n      });\r\n      \r\n      // Set the spectrum data states\r\n      if (has3Axis) {\r\n        setSpectrum3AxisData(tempSpectrum3AxisData);\r\n      }\r\n      if (has1Axis) {\r\n        setSpectrum1AxisData(tempSpectrum1AxisData);\r\n      }\r\n      \r\n      // Set display flags\r\n      if (has3Axis && has1Axis) {\r\n        setHasMultipleSpectrums(true);\r\n        console.log('Multiple spectrums available: 3-axis + 1-axis');\r\n      } else if (has3Axis) {\r\n        setIs3AxisSpectrum(true);\r\n        setSpectrumDataX(tempSpectrum3AxisData.x);\r\n        setSpectrumDataY(tempSpectrum3AxisData.y); \r\n        setSpectrumDataZ(tempSpectrum3AxisData.z);\r\n        console.log('Single 3-axis spectrum available');\r\n      } else if (has1Axis) {\r\n        setIs3AxisSpectrum(false);\r\n        setSpectrumData(tempSpectrum1AxisData);\r\n        console.log('Single 1-axis spectrum available');\r\n      }\r\n      \r\n      setSelectedPoint(pointData);\r\n      setShowSpectrum(true);\r\n      \r\n    } catch (error) {\r\n      console.error(\"Error fetching spectrum data:\", error);\r\n      message.error(\"Error fetching spectrum data: \" + error.message);\r\n    } finally {\r\n      setSpectrumLoading(false);\r\n    }\r\n  };\r\n\r\n  // Helper function to fetch single spectrum data\r\n  const fetchSingleSpectrumData = async (binFilePath, expectedType) => {\r\n    const cleanBinFile = binFilePath?.replace(\"uploads/\", \"\");\r\n    const apiUrl = `api/getDataFromPythonScript?fileName=${cleanBinFile}`;\r\n    \r\n    console.log(`Fetching spectrum for: ${cleanBinFile} (expected: ${expectedType})`);\r\n    \r\n    const response = await axiosInstance.get(apiUrl);\r\n    return response.data;\r\n  };\r\n\r\n  // Helper function to convert data to Highcharts format (memoized)\r\n  const convertToHighchartsData = useCallback((data) => {\r\n    if (!data || data.length === 0) return [];\r\n    \r\n    return data.map((item, index) => {\r\n      return [\r\n        item.x instanceof Date ? item.x.getTime() : index, // Use timestamp for time series\r\n        item.y || 0\r\n      ];\r\n    });\r\n  }, []);\r\n\r\n  // Helper function to convert spectrum data to Highcharts format\r\n  const convertSpectrumToHighchartsData = useCallback((spectrumData) => {\r\n    if (!spectrumData || spectrumData.length === 0) return [];\r\n    \r\n    // Data is already in [[x, y], [x, y], ...] format from fetchSpectrumData\r\n    return spectrumData;\r\n  }, []);\r\n\r\n  // Find harmonic frequencies and their amplitudes from spectrum data\r\n  const getTop4Peaks = (spectrumData, machineRpm) => {\r\n    if (!machineRpm) {\r\n      return [];\r\n    }\r\n    \r\n    const baseFreq = parseFloat(machineRpm) / 60; // 1X frequency (RPM/60)\r\n    const colors = [\"#ff0000\", \"#00ff00\", \"#0000ff\", \"#ff8800\"];\r\n    \r\n    // Define harmonic multipliers we want to find\r\n    const harmonicMultipliers = [1, 2, 3.3, 4.2];\r\n    \r\n    const harmonics = harmonicMultipliers.map((multiplier, index) => {\r\n      const targetFreq = baseFreq * multiplier;\r\n      let amplitude = 0;\r\n      \r\n      // Find the amplitude at this harmonic frequency from spectrum data\r\n      if (spectrumData && spectrumData.length > 0) {\r\n        // Find the closest frequency point in the spectrum data\r\n        const closestPoint = spectrumData.reduce((closest, point) => {\r\n          const [freq, amp] = point;\r\n          const currentDistance = Math.abs(freq - targetFreq);\r\n          const closestDistance = Math.abs(closest[0] - targetFreq);\r\n          return currentDistance < closestDistance ? point : closest;\r\n        });\r\n        amplitude = closestPoint[1];\r\n      }\r\n      \r\n      return {\r\n        frequency: targetFreq,\r\n        amplitude: amplitude,\r\n        multiplier: multiplier === 1 ? \"1X\" : \r\n                   multiplier === 2 ? \"2X\" : \r\n                   multiplier === 3.3 ? \"3.3X\" : \"4.2X\",\r\n        color: colors[index] || \"#666666\"\r\n      };\r\n    });\r\n    \r\n    return harmonics;\r\n  };\r\n\r\n  // Create main chart with Highcharts\r\n  const createMainChart = useCallback((data, title, unit, color) => {\r\n    if (!mainChartRef.current || !window.Highcharts) return;\r\n\r\n    if (mainChartRef.current.chart) {\r\n      mainChartRef.current.chart.destroy();\r\n    }\r\n\r\n    const chartData = convertToHighchartsData(data);\r\n    \r\n    // Create file availability pointer series\r\n    const fileAvailabilityData = data.map((point, index) => {\r\n      const availabilityStatus = getFileAvailabilityStatus(index);\r\n      const pointerColor = getFileAvailabilityColor(availabilityStatus);\r\n      \r\n      return {\r\n        x: point.x instanceof Date ? point.x.getTime() : index,\r\n        y: point.y,\r\n        color: pointerColor,\r\n        status: availabilityStatus\r\n      };\r\n    });\r\n    \r\n    mainChartRef.current.chart = window.Highcharts.stockChart(mainChartRef.current, {\r\n      chart: {\r\n        height: 450\r\n      },\r\n      title: {\r\n        text: title\r\n      },\r\n      xAxis: {\r\n        type: 'datetime',\r\n        title: {\r\n          text: 'Time'\r\n        }\r\n      },\r\n      yAxis: {\r\n        title: {\r\n          text: `${title} ${unit}`\r\n        }\r\n      },\r\n      series: [{\r\n        name: title,\r\n        data: chartData,\r\n        color: color,\r\n        type: 'line',\r\n        point: {\r\n          events: {\r\n            click: function(e) {\r\n              const pointIndex = this.index;\r\n              const originalData = data[pointIndex];\r\n              \r\n              // Check if we have any binary files available for this point\r\n              // Use the new fetchAllSpectrumData to handle multiple files\r\n              fetchAllSpectrumData(originalData);\r\n            }\r\n          }\r\n        }\r\n      }, {\r\n        name: 'File Availability',\r\n        type: 'scatter',\r\n        data: fileAvailabilityData,\r\n        marker: {\r\n          enabled: true,\r\n          symbol: 'circle',\r\n          radius: 4,\r\n          states: {\r\n            hover: {\r\n              radius: 6\r\n            }\r\n          }\r\n        },\r\n        showInLegend: false,\r\n        enableMouseTracking: true,\r\n        tooltip: {\r\n          pointFormatter: function() {\r\n            const statusLabels = {\r\n              'both': 'Both Mid & High Frequency',\r\n              'mid-freq': 'Mid-Frequency Only',\r\n              'high-freq': 'High-Frequency Only', \r\n              'none': 'No Analysis Available'\r\n            };\r\n            return `<span style=\"color:${this.color}\">●</span> Analysis: <b>${statusLabels[this.status] || 'Unknown'}</b><br/>`;\r\n          }\r\n        },\r\n        point: {\r\n          events: {\r\n            click: function(e) {\r\n              const pointIndex = this.index;\r\n              const originalData = data[pointIndex];\r\n              \r\n              fetchAllSpectrumData(originalData);\r\n            }\r\n          }\r\n        }\r\n      }],\r\n      tooltip: {\r\n        xDateFormat: '%Y-%m-%d %H:%M:%S',\r\n        shared: true\r\n      },\r\n      plotOptions: {\r\n        line: {\r\n          marker: {\r\n            enabled: false\r\n          }\r\n        }\r\n      },\r\n      legend: {\r\n        enabled: true,\r\n        align: 'right',\r\n        verticalAlign: 'top',\r\n        layout: 'vertical',\r\n        x: -10,\r\n        y: 50,\r\n        itemStyle: {\r\n          fontSize: '10px'\r\n        }\r\n      }\r\n    });\r\n  }, [convertToHighchartsData, fetchAllSpectrumData, getFileAvailabilityStatus, getFileAvailabilityColor, rawData]);\r\n\r\n  // Create spectrum chart with Highcharts\r\n  const createSpectrumChart = useCallback((spectrumData) => {\r\n    console.log('createSpectrumChart called with data length:', spectrumData ? spectrumData.length : 0);\r\n    console.log('spectrumChartRef.current:', spectrumChartRef.current);\r\n    console.log('window.Highcharts available:', !!window.Highcharts);\r\n    \r\n    if (!spectrumChartRef.current || !window.Highcharts) {\r\n      console.log('Missing ref or Highcharts, returning');\r\n      return;\r\n    }\r\n\r\n    if (spectrumChartRef.current.chart) {\r\n      console.log('Destroying existing chart');\r\n      spectrumChartRef.current.chart.destroy();\r\n    }\r\n\r\n    const chartData = convertSpectrumToHighchartsData(spectrumData);\r\n    console.log('Chart data prepared, length:', chartData.length);\r\n    console.log('Sample chart data:', chartData.slice(0, 3));\r\n    \r\n    // Get harmonic frequencies for plot lines if machine data is available\r\n    const harmonics = machineData && machineData.rpm ? getTop4Peaks(spectrumData, machineData.rpm) : [];\r\n    \r\n    // Create plot lines for harmonic frequencies\r\n    const plotLines = harmonics.map((harmonic) => ({\r\n      color: harmonic.color,\r\n      width: 2,\r\n      value: harmonic.frequency,\r\n      dashStyle: 'solid',\r\n      label: {\r\n        text: harmonic.multiplier,\r\n        style: {\r\n          color: harmonic.color,\r\n          fontWeight: 'bold',\r\n          fontSize: '11px'\r\n        },\r\n        align: 'center',\r\n        verticalAlign: 'bottom',\r\n        y: -5\r\n      }\r\n    }));\r\n\r\n    // Create series for harmonic frequency markers (dots)\r\n    const harmonicSeries = harmonics.map((harmonic) => ({\r\n      name: `Harmonic ${harmonic.multiplier}`,\r\n      type: 'scatter',\r\n      data: [[harmonic.frequency, harmonic.amplitude || 0]],\r\n      color: harmonic.color,\r\n      marker: {\r\n        symbol: 'circle',\r\n        radius: 5,\r\n        fillColor: harmonic.color,\r\n        lineColor: harmonic.color,\r\n        lineWidth: 2\r\n      },\r\n      showInLegend: false,\r\n      enableMouseTracking: true,\r\n      tooltip: {\r\n        pointFormat: '<b>{point.x:.1f} Hz</b><br/>Harmonic: <b>' + harmonic.multiplier + '</b>'\r\n      }\r\n    }));\r\n    \r\n    try {\r\n      console.log('Creating Highcharts chart...');\r\n      spectrumChartRef.current.chart = window.Highcharts.chart(spectrumChartRef.current, {\r\n        chart: {\r\n          height: 450,\r\n          type: 'line',\r\n          zoomType: 'xy'\r\n        },\r\n        title: {\r\n          text: 'Amplitude Spectrum'\r\n        },\r\n        xAxis: {\r\n          title: {\r\n            text: 'Frequency (Hz)'\r\n          }\r\n        },\r\n        yAxis: {\r\n          title: {\r\n            text: 'Log Amplitude'\r\n          }\r\n        },\r\n        series: [\r\n          {\r\n            name: 'Amplitude Spectrum',\r\n            data: chartData,\r\n            color: '#ef4444',\r\n            lineWidth: 2,\r\n            type: 'line'\r\n          }\r\n        ],\r\n        legend: {\r\n          enabled: false\r\n        },\r\n        plotOptions: {\r\n          line: {\r\n            marker: {\r\n              enabled: false\r\n            },\r\n            states: {\r\n              hover: {\r\n                lineWidthPlus: 1\r\n              }\r\n            }\r\n          },\r\n          scatter: {\r\n            marker: {\r\n              enabled: true\r\n            }\r\n          }\r\n        },\r\n      });\r\n      console.log('Chart created successfully:', spectrumChartRef.current.chart);\r\n    } catch (error) {\r\n      console.error('Error creating spectrum chart:', error);\r\n    }\r\n  }, [convertSpectrumToHighchartsData, machineData, getTop4Peaks]);\r\n\r\n  // Create combined 3-axis spectrum chart for _0.bin files\r\n  const create3AxisSpectrumCharts = useCallback((dataX, dataY, dataZ) => {\r\n    console.log('create3AxisSpectrumCharts called - creating single combined chart');\r\n    \r\n    if (!window.Highcharts) {\r\n      console.log('Highcharts not available');\r\n      return;\r\n    }\r\n\r\n    // Get harmonic frequencies for plot lines if machine data is available\r\n    const harmonics = machineData && machineData.rpm ? getTop4Peaks(dataZ, machineData.rpm) : [];\r\n    \r\n    // Create plot lines for harmonic frequencies\r\n    const plotLines = harmonics.map((harmonic) => ({\r\n      color: harmonic.color,\r\n      width: 2,\r\n      value: harmonic.frequency,\r\n      dashStyle: 'solid',\r\n      label: {\r\n        text: harmonic.multiplier,\r\n        style: {\r\n          color: harmonic.color,\r\n          fontWeight: 'bold',\r\n          fontSize: '11px'\r\n        },\r\n        align: 'center',\r\n        verticalAlign: 'bottom',\r\n        y: -5\r\n      }\r\n    }));\r\n\r\n    // Create series for harmonic frequency markers (dots)\r\n    const harmonicSeries = harmonics.map((harmonic) => ({\r\n      name: `Harmonic ${harmonic.multiplier}`,\r\n      type: 'scatter',\r\n      data: [[harmonic.frequency, harmonic.amplitude || 0]],\r\n      color: harmonic.color,\r\n      marker: {\r\n        symbol: 'circle',\r\n        radius: 5,\r\n        fillColor: harmonic.color,\r\n        lineColor: harmonic.color,\r\n        lineWidth: 2\r\n      },\r\n      showInLegend: false,\r\n      enableMouseTracking: true,\r\n      tooltip: {\r\n        pointFormat: '<b>{point.x:.1f} Hz</b><br/>Harmonic: <b>' + harmonic.multiplier + '</b>'\r\n      }\r\n    }));\r\n\r\n    // Create single combined chart with all 3 axes\r\n    if (spectrumChartRefX.current) {\r\n      if (spectrumChartRefX.current.chart) {\r\n        spectrumChartRefX.current.chart.destroy();\r\n      }\r\n      \r\n      spectrumChartRefX.current.chart = window.Highcharts.chart(spectrumChartRefX.current, {\r\n        chart: { height: 450, type: 'line', zoomType: 'xy' },\r\n        title: { text: '3-Axis Mid-Frequency Spectrum Analysis' },\r\n        subtitle: { text: 'Combined X, Y, Z axes (fs=6664Hz, nperseg=4096)' },\r\n        xAxis: { \r\n          title: { text: 'Frequency (Hz)' },\r\n          gridLineWidth: 1,\r\n          plotLines: plotLines\r\n        },\r\n        yAxis: { \r\n          title: { text: 'Log Amplitude (mm/s²)²/Hz' },\r\n          gridLineWidth: 1\r\n        },\r\n        series: [\r\n          {\r\n            name: 'X-Axis',\r\n            data: dataX,\r\n            color: '#ef4444',\r\n            lineWidth: 2,\r\n            type: 'line'\r\n          }, {\r\n            name: 'Y-Axis',\r\n            data: dataY,\r\n            color: '#3b82f6',\r\n            lineWidth: 2,\r\n            type: 'line'\r\n          }, {\r\n            name: 'Z-Axis',\r\n            data: dataZ,\r\n            color: '#10b981',\r\n            lineWidth: 2,\r\n            type: 'line'\r\n          },\r\n          ...harmonicSeries\r\n        ],\r\n        legend: { \r\n          enabled: true,\r\n          align: 'center',\r\n          verticalAlign: 'top',\r\n          layout: 'horizontal'\r\n        },\r\n        plotOptions: { \r\n          line: { \r\n            marker: { enabled: false },\r\n            states: {\r\n              hover: {\r\n                lineWidthPlus: 1\r\n              }\r\n            }\r\n          },\r\n          scatter: {\r\n            marker: {\r\n              enabled: true\r\n            }\r\n          }\r\n        },\r\n        tooltip: {\r\n          shared: true,\r\n          crosshairs: true,\r\n          formatter: function() {\r\n            let tooltip = '<b>Frequency: ' + this.x.toFixed(2) + ' Hz</b><br/>';\r\n            this.points.forEach(point => {\r\n              tooltip += '<span style=\"color:' + point.color + '\">' + point.series.name + \r\n                        ': ' + point.y.toFixed(4) + '</span><br/>';\r\n            });\r\n            return tooltip;\r\n          }\r\n        },\r\n      });\r\n    }\r\n  }, [machineData, getTop4Peaks]);\r\n\r\n  // Create multi-spectrum charts (both 3-axis and 1-axis for same data point)\r\n  const createMultiSpectrumCharts = useCallback((spectrum3Axis, spectrum1Axis) => {\r\n    console.log('createMultiSpectrumCharts called');\r\n    \r\n    if (!window.Highcharts) {\r\n      console.log('Highcharts not available');\r\n      return;\r\n    }\r\n\r\n    // Get harmonic frequencies for plot lines if machine data is available\r\n    const harmonics = machineData && machineData.rpm ? getTop4Peaks(spectrum3Axis.z, machineData.rpm) : [];\r\n    const harmonics1Axis = machineData && machineData.rpm ? getTop4Peaks(spectrum1Axis, machineData.rpm) : [];\r\n    \r\n    // Create plot lines for harmonic frequencies\r\n    const plotLines = harmonics.map((harmonic) => ({\r\n      color: harmonic.color,\r\n      width: 2,\r\n      value: harmonic.frequency,\r\n      dashStyle: 'solid',\r\n      label: {\r\n        text: harmonic.multiplier,\r\n        style: {\r\n          color: harmonic.color,\r\n          fontWeight: 'bold',\r\n          fontSize: '11px'\r\n        },\r\n        align: 'center',\r\n        verticalAlign: 'bottom',\r\n        y: -5\r\n      }\r\n    }));\r\n\r\n    const plotLines1Axis = harmonics1Axis.map((harmonic) => ({\r\n      color: harmonic.color,\r\n      width: 2,\r\n      value: harmonic.frequency,\r\n      dashStyle: 'solid',\r\n      label: {\r\n        text: harmonic.multiplier,\r\n        style: {\r\n          color: harmonic.color,\r\n          fontWeight: 'bold',\r\n          fontSize: '11px'\r\n        },\r\n        align: 'center',\r\n        verticalAlign: 'bottom',\r\n        y: -5\r\n      }\r\n    }));\r\n\r\n    // Create series for harmonic frequency markers (dots)\r\n    const harmonicSeries = harmonics.map((harmonic) => ({\r\n      name: `Harmonic ${harmonic.multiplier}`,\r\n      type: 'scatter',\r\n      data: [[harmonic.frequency, harmonic.amplitude || 0]],\r\n      color: harmonic.color,\r\n      marker: {\r\n        symbol: 'circle',\r\n        radius: 5,\r\n        fillColor: harmonic.color,\r\n        lineColor: harmonic.color,\r\n        lineWidth: 2\r\n      },\r\n      showInLegend: false,\r\n      enableMouseTracking: true,\r\n      tooltip: {\r\n        pointFormat: '<b>{point.x:.1f} Hz</b><br/>Harmonic: <b>' + harmonic.multiplier + '</b>'\r\n      }\r\n    }));\r\n\r\n    const harmonicSeries1Axis = harmonics1Axis.map((harmonic) => ({\r\n      name: `Harmonic ${harmonic.multiplier}`,\r\n      type: 'scatter',\r\n      data: [[harmonic.frequency, harmonic.amplitude || 0]],\r\n      color: harmonic.color,\r\n      marker: {\r\n        symbol: 'circle',\r\n        radius: 5,\r\n        fillColor: harmonic.color,\r\n        lineColor: harmonic.color,\r\n        lineWidth: 2\r\n      },\r\n      showInLegend: false,\r\n      enableMouseTracking: true,\r\n      tooltip: {\r\n        pointFormat: '<b>{point.x:.1f} Hz</b><br/>Harmonic: <b>' + harmonic.multiplier + '</b>'\r\n      }\r\n    }));\r\n\r\n    // Create single combined 3-axis chart\r\n    if (multiSpectrum3AxisRefX.current) {\r\n      if (multiSpectrum3AxisRefX.current.chart) {\r\n        multiSpectrum3AxisRefX.current.chart.destroy();\r\n      }\r\n      \r\n      multiSpectrum3AxisRefX.current.chart = window.Highcharts.chart(multiSpectrum3AxisRefX.current, {\r\n        chart: { height: 420, type: 'line', zoomType: 'xy' },\r\n        title: { text: '3-Axis Mid-Frequency Spectrum Analysis' },\r\n        subtitle: { text: 'Combined X, Y, Z axes (fs=6664Hz, nperseg=4096)' },\r\n        xAxis: { \r\n          title: { text: 'Frequency (Hz)' },\r\n          gridLineWidth: 1,\r\n          plotLines: plotLines\r\n        },\r\n        yAxis: { \r\n          title: { text: 'Log Amplitude (mm/s²)²/Hz' },\r\n          gridLineWidth: 1\r\n        },\r\n        series: [\r\n          {\r\n            name: 'X-Axis',\r\n            data: spectrum3Axis.x,\r\n            color: '#ef4444',\r\n            lineWidth: 2,\r\n            type: 'line'\r\n          }, {\r\n            name: 'Y-Axis',\r\n            data: spectrum3Axis.y,\r\n            color: '#3b82f6',\r\n            lineWidth: 2,\r\n            type: 'line'\r\n          }, {\r\n            name: 'Z-Axis',\r\n            data: spectrum3Axis.z,\r\n            color: '#10b981',\r\n            lineWidth: 2,\r\n            type: 'line'\r\n          },\r\n          ...harmonicSeries\r\n        ],\r\n        legend: { \r\n          enabled: true,\r\n          align: 'center',\r\n          verticalAlign: 'top',\r\n          layout: 'horizontal'\r\n        },\r\n        plotOptions: { \r\n          line: { \r\n            marker: { enabled: false },\r\n            states: {\r\n              hover: {\r\n                lineWidthPlus: 1\r\n              }\r\n            }\r\n          },\r\n          scatter: {\r\n            marker: {\r\n              enabled: true\r\n            }\r\n          }\r\n        },\r\n        tooltip: {\r\n          shared: true,\r\n          crosshairs: true,\r\n          formatter: function() {\r\n            let tooltip = '<b>Frequency: ' + this.x.toFixed(2) + ' Hz</b><br/>';\r\n            this.points.forEach(point => {\r\n              tooltip += '<span style=\"color:' + point.color + '\">' + point.series.name + \r\n                        ': ' + point.y.toFixed(4) + '</span><br/>';\r\n            });\r\n            return tooltip;\r\n          }\r\n        },\r\n      });\r\n    }\r\n\r\n    // 1-axis chart\r\n    if (multiSpectrum1AxisRef.current) {\r\n      if (multiSpectrum1AxisRef.current.chart) {\r\n        multiSpectrum1AxisRef.current.chart.destroy();\r\n      }\r\n      \r\n      multiSpectrum1AxisRef.current.chart = window.Highcharts.chart(multiSpectrum1AxisRef.current, {\r\n        chart: { height: 370, type: 'line', zoomType: 'xy' },\r\n        title: { text: '1-Axis High-Frequency Spectrum Analysis' },\r\n        subtitle: { text: 'Single axis (fs=2560Hz, nperseg=65536)' },\r\n        xAxis: { \r\n          title: { text: 'Frequency (Hz)' }\r\n        },\r\n        yAxis: { title: { text: 'Log Amplitude' } },\r\n        series: [\r\n          {\r\n            name: '1-Axis PSD',\r\n            data: spectrum1Axis,\r\n            color: '#f59e0b',\r\n            lineWidth: 2,\r\n            type: 'line'\r\n          }\r\n        ],\r\n        legend: { enabled: false },\r\n        plotOptions: { \r\n          line: { \r\n            marker: { enabled: false },\r\n            states: {\r\n              hover: {\r\n                lineWidthPlus: 1\r\n              }\r\n            }\r\n          },\r\n          scatter: {\r\n            marker: {\r\n              enabled: true\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }, [machineData, getTop4Peaks]);\r\n\r\n  useEffect(() => {\r\n    fetchMachineData();\r\n    fetchSensorsData();\r\n    if (sensorId) {\r\n      setSelectedAlarm(sensorId);\r\n      fetchSensorData(sensorId, startDate, endDate);\r\n    }\r\n  }, [machineId, sensorId]);\r\n\r\n  // Fetch machine data to get RPM for harmonic calculations\r\n  const fetchMachineData = async () => {\r\n    try {\r\n      const response = await axiosInstance.get(`api/web/machines/${machineId}`);\r\n      const machine = response.data.item;\r\n      setMachineData(machine);\r\n      \r\n      // Calculate harmonic frequencies based on RPM\r\n      if (machine && machine.rpm) {\r\n        const baseFreq = parseFloat(machine.rpm) / 60; // Convert RPM to Hz (1st order frequency)\r\n        const harmonics = [\r\n          { multiplier: 1, frequency: baseFreq, label: \"1X\", color: \"#ff0000\" },\r\n          { multiplier: 2, frequency: baseFreq * 2, label: \"2X\", color: \"#00ff00\" },\r\n          { multiplier: 3, frequency: baseFreq * 3, label: \"3X\", color: \"#0000ff\" },\r\n          { multiplier: 3.4, frequency: baseFreq * 3.4, label: \"3.4X\", color: \"#ff8800\" },\r\n          { multiplier: 4, frequency: baseFreq * 4, label: \"4X\", color: \"#8800ff\" },\r\n          { multiplier: 4.2, frequency: baseFreq * 4.2, label: \"4.2X\", color: \"#00ffff\" }\r\n        ];\r\n        setHarmonicFrequencies(harmonics);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching machine data:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchSensorsData = async () => {\r\n    try {\r\n      const response = await axiosInstance.get(`api/web/machines/${machineId}/sensors`);\r\n      setSensorsData(response.data.items || []);\r\n    } catch (error) {\r\n      console.error(\"Error fetching sensors data:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchSensorData = async (sensor_id, start_date, end_date) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axiosInstance.get(`api/machine-data?machine_id=${machineId}&deviceID=${sensor_id}&start_date=${start_date}&end_date=${end_date}`);\r\n      const rawData = response.data.data;\r\n      setRawData(rawData);\r\n\r\n      // Process all chart data with proper number parsing and file mapping\r\n      setMid_freq_acceleration_p2p_x(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_acceleration_p2p_x) || 0,\r\n            extraValue: item.file_1?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_acceleration_p2p_y(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_acceleration_p2p_y) || 0,\r\n            extraValue: item.file_2?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_acceleration_p2p_z(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_acceleration_p2p_z) || 0,\r\n            extraValue: item.file_0?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setHigh_freq_acceleration_p2p_x(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.high_freq_acceleration_p2p_z) || 0,\r\n            extraValue: item.file_0?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_displacement_x(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_displacement_x) || 0,\r\n            extraValue: item.file_1?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_displacement_y(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_displacement_y) || 0,\r\n            extraValue: item.file_2?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_displacement_z(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_displacement_z) || 0,\r\n            extraValue: item.file_0?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_velocity_x(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_velocity_x) || 0,\r\n            extraValue: item.file_1?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_velocity_y(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_velocity_y) || 0,\r\n            extraValue: item.file_2?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_velocity_z(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_velocity_z) || 0,\r\n            extraValue: item.file_0?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_env_x(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_env_x) || 0,\r\n            extraValue: item.file_1?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_env_y(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_env_y) || 0,\r\n            extraValue: item.file_2?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_env_z(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_env_z) || 0,\r\n            extraValue: item.file_0?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setInclination_x(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.inclination_x) || 0,\r\n            extraValue: item.file_1?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setInclination_y(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.inclination_y) || 0,\r\n            extraValue: item.file_2?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setInclination_z(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.inclination_z) || 0,\r\n            extraValue: item.file_0?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      // Additional chart data - using correct field names from API\r\n      setMotorServiceTemperature(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.temperature) || 0, // API uses 'temperature' not 'motor_service_temperature'\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setBatteryPercentage(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.battery_percentage) || 0,\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setBatteryVoltage(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.battery_voltage) || 0,\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setRssi(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.RSSI) || 0, // API uses 'RSSI' (uppercase) not 'rssi'\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching sensor data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleMetricTypeChange = (value) => {\r\n    setSelectedMetricType(value);\r\n    // Reset axis to first available axis for the selected metric\r\n    const availableAxes = metricConfig[value]?.axes || [\"x\"];\r\n    setSelectedAxis(availableAxes[0]);\r\n  };\r\n\r\n  const handleAxisChange = (value) => {\r\n    setSelectedAxis(value);\r\n  };\r\n\r\n  const download = async (sensor_id, start_date, end_date) => {\r\n    if (rawData.length === 0) {\r\n      message.error(\"No data found\");\r\n      return;\r\n    }\r\n    let url = `${API_BASE_URL}/api/downloadMultipleRawFilesAndZipAndServe?machine_id=${machineId}&deviceID=${sensor_id}&start_date=${start_date}&end_date=${end_date}`;\r\n    window.open(url, '_blank');\r\n  };\r\n\r\n  const handleDateRangeSubmit = () => {\r\n    if (modalStartDate && modalEndDate) {\r\n      const start = moment(modalStartDate).format('YYYY-MM-DD hh:mm:ss');\r\n      const end = moment(modalEndDate).format('YYYY-MM-DD hh:mm:ss');\r\n      setStartDate(start);\r\n      setEndDate(end);\r\n      setSelectorDate(\"Date-Range\");\r\n      if (selectedAlarm) {\r\n        fetchSensorData(selectedAlarm, start, end);\r\n      }\r\n    }\r\n    setDateRangeModal(false);\r\n  };\r\n\r\n  // Update main chart when data changes\r\n  useEffect(() => {\r\n    const chartData = getCurrentChartData();\r\n    const currentConfig = metricConfig[selectedMetricType];\r\n    const currentColor = currentConfig?.colors?.[selectedAxis] || \"#ef4444\";\r\n    const currentUnit = currentConfig?.unit || \"\";\r\n    const chartTitle = `${currentConfig?.label || \"\"} ${selectedAxis.toUpperCase()}`;\r\n    \r\n    if (chartData.length > 0) {\r\n      createMainChart(chartData, chartTitle, currentUnit, currentColor);\r\n    }\r\n  }, [selectedMetricType, selectedAxis, rawData, createMainChart]);\r\n\r\n  // Update spectrum chart when spectrum data changes (single-axis)\r\n  useEffect(() => {\r\n    if (spectrumData && spectrumData.length > 0 && showSpectrum && !is3AxisSpectrum && !hasMultipleSpectrums) {\r\n      console.log('Creating single-axis spectrum chart with data length:', spectrumData.length);\r\n      // Add a small delay to ensure the DOM element is rendered\r\n      setTimeout(() => {\r\n        createSpectrumChart(spectrumData);\r\n      }, 100);\r\n    }\r\n  }, [spectrumData, createSpectrumChart, showSpectrum, is3AxisSpectrum, hasMultipleSpectrums]);\r\n\r\n  // Update 3-axis spectrum chart when data changes\r\n  useEffect(() => {\r\n    if (is3AxisSpectrum && showSpectrum && !hasMultipleSpectrums && \r\n        spectrumDataX && spectrumDataX.length > 0 && \r\n        spectrumDataY && spectrumDataY.length > 0 && \r\n        spectrumDataZ && spectrumDataZ.length > 0) {\r\n      console.log('Creating 3-axis spectrum chart');\r\n      setTimeout(() => {\r\n        create3AxisSpectrumCharts(spectrumDataX, spectrumDataY, spectrumDataZ);\r\n      }, 100);\r\n    }\r\n  }, [spectrumDataX, spectrumDataY, spectrumDataZ, create3AxisSpectrumCharts, showSpectrum, is3AxisSpectrum, hasMultipleSpectrums]);\r\n\r\n  // Update multi-spectrum charts when data changes\r\n  useEffect(() => {\r\n    if (hasMultipleSpectrums && showSpectrum && \r\n        spectrum3AxisData && spectrum1AxisData && spectrum1AxisData.length > 0) {\r\n      console.log('Creating multi-spectrum charts');\r\n      setTimeout(() => {\r\n        createMultiSpectrumCharts(spectrum3AxisData, spectrum1AxisData);\r\n      }, 100);\r\n    }\r\n  }, [spectrum3AxisData, spectrum1AxisData, createMultiSpectrumCharts, showSpectrum, hasMultipleSpectrums]);\r\n\r\n  // Route guard: Redirect free users immediately\r\n  useEffect(() => {\r\n    if (isFreeUser) {\r\n      message.error(\"Access Denied: Sensor analysis is only available for premium users. Please upgrade your plan.\");\r\n      history.push(`/app/machine-and-sensors/machine-details/${machineId}`);\r\n    }\r\n  }, [isFreeUser, history, machineId]);\r\n\r\n  // If free user, don't render the component\r\n  if (isFreeUser) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      <div style={{ marginBottom: '20px' }}>\r\n        <Button onClick={() => history.push(`/app/machine-and-sensors/machine-details/${machineId}`)}>← Back to Machine Details</Button>\r\n      </div>\r\n      \r\n      <Card>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          marginBottom: '20px',\r\n          gap: '15px'\r\n        }}>\r\n          <div><img src={SeriesImage} alt=\"Series\" /></div>\r\n          <div style={{\r\n            fontWeight: 'bold',\r\n            fontSize: '16px'\r\n          }}>Sensor Analysis {isFreeUser && <span style={{ color: '#f59e0b' }}>(Limited Features)</span>}</div>\r\n          <div>\r\n            <Button \r\n              type=\"primary\" \r\n              disabled={rawData.length === 0} \r\n              loading={loading} \r\n              onClick={() => download(selectedAlarm, startDate, endDate)}\r\n            >\r\n              Acquire Raw Data\r\n            </Button>\r\n          </div>\r\n\r\n          <div style={{ width: '200px' }}>\r\n            <Select \r\n              value={selectorDate} \r\n              onChange={(e) => {\r\n                if (e === \"Date Range\") {\r\n                  setDateRangeModal(true);\r\n                  return;\r\n                }\r\n                setSelectorDate(e);\r\n                let start, end;\r\n                if (e === \"1\") {\r\n                  start = moment().subtract(1, 'days').format('YYYY-MM-DD hh:mm:ss');\r\n                  end = moment().format('YYYY-MM-DD hh:mm:ss');\r\n                } else if (e === \"7\") {\r\n                  start = moment().subtract(7, 'days').format('YYYY-MM-DD hh:mm:ss');\r\n                  end = moment().format('YYYY-MM-DD hh:mm:ss');\r\n                } else if (e === \"30\") {\r\n                  start = moment().subtract(30, 'days').format('YYYY-MM-DD hh:mm:ss');\r\n                  end = moment().format('YYYY-MM-DD hh:mm:ss');\r\n                } else if (e === \"60\") {\r\n                  start = moment().subtract(60, 'days').format('YYYY-MM-DD hh:mm:ss');\r\n                  end = moment().format('YYYY-MM-DD hh:mm:ss');\r\n                }\r\n                setStartDate(start);\r\n                setEndDate(end);\r\n                if (selectedAlarm) {\r\n                  fetchSensorData(selectedAlarm, start, end);\r\n                }\r\n              }} \r\n              style={{ width: '100%' }}\r\n            >\r\n              <Select.Option value=\"1\">1 Day</Select.Option>\r\n              <Select.Option value=\"7\">7 Day</Select.Option>\r\n              <Select.Option value=\"30\">30 Day</Select.Option>\r\n              <Select.Option value=\"60\">60 Day</Select.Option>\r\n              <Select.Option value=\"Date Range\">Date Range</Select.Option>\r\n            </Select>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ width: \"300px\", marginBottom: \"30px\" }}>\r\n          <Select \r\n            value={selectedAlarm}\r\n            placeholder=\"Select Sensor\"\r\n            onChange={(e) => {\r\n              setSelectedAlarm(e);\r\n              localStorage.setItem('deviceId2', e);\r\n              fetchSensorData(e, startDate, endDate);\r\n            }}\r\n            style={{ width: \"100%\" }}\r\n          >\r\n            {sensorsData.map((item) => (\r\n              <Option key={item.sensor_id} value={item.sensor_id}>\r\n                {item.sensor_type + \" #\" + (item.sensor_id_label !== null ? item.sensor_id_label : item.sensor_id)}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </div>\r\n\r\n        {/* Spectrum Chart - shown when a point is clicked */}\r\n        {showSpectrum && (\r\n          <Card \r\n            title={\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <span>\r\n                  {hasMultipleSpectrums ? \r\n                    `Analysis` :\r\n                    is3AxisSpectrum ? \r\n                      `3-Axis Combined Spectrum (${spectrumDataX ? spectrumDataX.length : 0} points per axis)` : \r\n                      `Amplitude Spectrum (${spectrumData ? spectrumData.length : 0} points)`\r\n                  }\r\n                </span>\r\n                <Button size=\"small\" onClick={() => setShowSpectrum(false)}>✕ Close</Button>\r\n              </div>\r\n            }\r\n            style={{ marginBottom: '20px' }}\r\n            loading={spectrumLoading}\r\n          >\r\n            {selectedPoint && (\r\n              <div style={{ marginBottom: '15px', padding: '10px', background: '#f0f2f5', borderRadius: '6px' }}>\r\n                <div><strong>Time:</strong> {moment(selectedPoint.x).format('DD-MM-YYYY HH:mm:ss')}</div>\r\n                <div><strong>Value:</strong> {typeof selectedPoint.y === 'number' ? selectedPoint.y.toFixed(2) : selectedPoint.y} {metricConfig[selectedMetricType]?.unit || ''}</div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Single spectrum charts (either 3-axis OR 1-axis, not both) */}\r\n            {!hasMultipleSpectrums && is3AxisSpectrum && (\r\n              <>\r\n                <div style={{ marginBottom: '20px' }}>\r\n                  <h3 style={{ color: '#1890ff', marginBottom: '15px' }}>3-Axis Mid-Frequency Spectrum Analysis</h3>\r\n                  <div style={{ width: '100%', height: '470px', overflowX: 'auto' }}>\r\n                    <div ref={spectrumChartRefX} style={{ width: '100%', height: '470px' }}></div>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {!hasMultipleSpectrums && !is3AxisSpectrum && (\r\n              <>\r\n                <div style={{ marginBottom: '20px' }}>\r\n                  <h3 style={{ color: '#fa8c16', marginBottom: '15px' }}>1-Axis High-Frequency Spectrum Analysis</h3>\r\n                  <div style={{ display: 'flex', gap: '20px' }}>\r\n                    <div style={{ flex: 1, height: '470px', overflowX: 'auto' }}>\r\n                      <div ref={spectrumChartRef} style={{ width: '100%', height: '470px' }}></div>\r\n                    </div>\r\n                    \r\n                    {/* Harmonics Table - Right Side - For Single Axis */}\r\n                    {machineData && (\r\n                      <div style={{ flexShrink: 0 }}>\r\n                        <div style={{ \r\n                          width: '250px',\r\n                          border: '3px solid #fa8c16',\r\n                          borderRadius: '8px',\r\n                          padding: '12px',\r\n                          background: '#fff7e6'\r\n                        }}>\r\n                          <div style={{ \r\n                            background: '#fa8c16', \r\n                            color: 'white', \r\n                            padding: '6px', \r\n                            textAlign: 'center', \r\n                            fontWeight: 'bold',\r\n                            borderRadius: '4px',\r\n                            marginBottom: '10px'\r\n                          }}>\r\n                            Harmonics of Rotational Frequency\r\n                          </div>\r\n                          <table style={{ width: '100%', fontSize: '12px' }}>\r\n                            <tbody>\r\n                              {getTop4Peaks(spectrumData, machineData.rpm).map((peak, index) => (\r\n                                <tr key={index}>\r\n                                  <td style={{ \r\n                                    color: peak.color, \r\n                                    fontWeight: 'bold',\r\n                                    paddingRight: '8px'\r\n                                  }}>\r\n                                    ●\r\n                                  </td>\r\n                                  <td style={{ fontWeight: 'bold' }}>\r\n                                    {(index + 1)}st Order @\r\n                                  </td>\r\n                                  <td style={{ \r\n                                    color: peak.color, \r\n                                    fontWeight: 'bold',\r\n                                    textAlign: 'right'\r\n                                  }}>\r\n                                    {peak.frequency.toFixed(1)} Hz\r\n                                  </td>\r\n                                  <td style={{ \r\n                                    textAlign: 'right',\r\n                                    fontWeight: 'bold'\r\n                                  }}>\r\n                                    {peak.multiplier}\r\n                                  </td>\r\n                                </tr>\r\n                              ))}\r\n                            </tbody>\r\n                          </table>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {/* Multi-spectrum charts (both 3-axis and 1-axis for same data point) */}\r\n            {hasMultipleSpectrums && (\r\n              <>\r\n                <div style={{ marginBottom: '20px' }}>\r\n                  <h3 style={{ color: '#1890ff', marginBottom: '15px' }}>Mid-Frequency Analysis</h3>\r\n                  <div style={{ width: '100%', height: '420px', overflowX: 'auto' }}>\r\n                    <div ref={multiSpectrum3AxisRefX} style={{ width: '100%', height: '420px' }}></div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '20px' }}>\r\n                  <h3 style={{ color: '#fa8c16', marginBottom: '15px' }}>High-Frequency Analysis</h3>\r\n                  <div style={{ display: 'flex', gap: '20px' }}>\r\n                    <div style={{ flex: 1, height: '370px', overflowX: 'auto' }}>\r\n                      <div ref={multiSpectrum1AxisRef} style={{ width: '100%', height: '370px' }}></div>\r\n                    </div>\r\n                    \r\n                    {/* Harmonics Table - Right Side - Based on Top 4 Peaks */}\r\n                    {machineData && (\r\n                      <div style={{ flexShrink: 0 }}>\r\n                        <div style={{ \r\n                          width: '250px',\r\n                          border: '3px solid #1890ff',\r\n                          borderRadius: '8px',\r\n                          padding: '12px',\r\n                          background: '#e6f7ff'\r\n                        }}>\r\n                          <div style={{ \r\n                            background: '#1890ff', \r\n                            color: 'white', \r\n                            padding: '6px', \r\n                            textAlign: 'center', \r\n                            fontWeight: 'bold',\r\n                            borderRadius: '4px',\r\n                            marginBottom: '10px'\r\n                          }}>\r\n                            Harmonics of Rotational Frequency\r\n                          </div>\r\n                          <table style={{ width: '100%', fontSize: '12px' }}>\r\n                            <tbody>\r\n                              {getTop4Peaks(null, machineData.rpm).map((peak, index) => (\r\n                                <tr key={index}>\r\n                                  <td style={{ \r\n                                    color: peak.color, \r\n                                    fontWeight: 'bold',\r\n                                    paddingRight: '8px'\r\n                                  }}>\r\n                                    ●\r\n                                  </td>\r\n                                  <td style={{ fontWeight: 'bold' }}>\r\n                                    {(index + 1)}st Order @\r\n                                  </td>\r\n                                  <td style={{ \r\n                                    color: peak.color, \r\n                                    fontWeight: 'bold',\r\n                                    textAlign: 'right'\r\n                                  }}>\r\n                                    {peak.frequency.toFixed(1)} Hz\r\n                                  </td>\r\n                                  <td style={{ \r\n                                    textAlign: 'right',\r\n                                    fontWeight: 'bold'\r\n                                  }}>\r\n                                    {peak.multiplier}\r\n                                  </td>\r\n                                </tr>\r\n                              ))}\r\n                            </tbody>\r\n                          </table>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </Card>\r\n        )}\r\n\r\n        {/* Single Trend chart */}\r\n        <Card \r\n          title={\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\r\n              {/* First row: Trend title and Metric Type Toggle Buttons */}\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                <span>Trend</span>\r\n                <div style={{ display: 'flex', gap: '5px' }}>\r\n                  {Object.entries(metricConfig).map(([key, config]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => handleMetricTypeChange(key)}\r\n                      style={{\r\n                        padding: '4px 12px',\r\n                        fontSize: '12px',\r\n                        border: 'none',\r\n                        borderRadius: '15px',\r\n                        cursor: 'pointer',\r\n                        backgroundColor: selectedMetricType === key ? '#1890ff' : 'rgba(255, 255, 255, 0.1)',\r\n                        color: selectedMetricType === key ? 'white' : '#666',\r\n                        transition: 'all 0.2s ease'\r\n                      }}\r\n                    >\r\n                      {config.label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Second row: Axis Toggle Buttons (center aligned) */}\r\n              {(metricConfig[selectedMetricType]?.axes || []).filter(axis => axis !== \"\").length > 0 && (\r\n                <div style={{ display: 'flex', justifyContent: 'center', gap: '10px' }}>\r\n                  {(metricConfig[selectedMetricType]?.axes || []).filter(axis => axis !== \"\").map((axis) => (\r\n                    <button\r\n                      key={axis}\r\n                      onClick={() => handleAxisChange(axis)}\r\n                      style={{\r\n                        padding: '6px 16px',\r\n                        fontSize: '14px',\r\n                        fontWeight: '600',\r\n                        border: 'none',\r\n                        borderRadius: '15px',\r\n                        cursor: 'pointer',\r\n                        backgroundColor: selectedAxis === axis ? metricConfig[selectedMetricType]?.colors?.[axis] || '#1890ff' : 'rgba(255, 255, 255, 0.1)',\r\n                        color: selectedAxis === axis ? 'white' : '#666',\r\n                        transition: 'all 0.2s ease',\r\n                        minWidth: '45px'\r\n                      }}\r\n                    >\r\n                      {axis.toUpperCase()}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n              \r\n              {/* Third row: File Availability Legend */}\r\n              <div style={{ display: 'flex', justifyContent: 'center', gap: '15px', fontSize: '11px', color: '#666' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                  <div style={{ width: '8px', height: '8px', borderRadius: '50%', backgroundColor: '#10b981' }}></div>\r\n                  <span>Both Analyses</span>\r\n                </div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                  <div style={{ width: '8px', height: '8px', borderRadius: '50%', backgroundColor: '#3b82f6' }}></div>\r\n                  <span>Mid-Frequency</span>\r\n                </div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                  <div style={{ width: '8px', height: '8px', borderRadius: '50%', backgroundColor: '#f59e0b' }}></div>\r\n                  <span>High-Frequency</span>\r\n                </div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                  <div style={{ width: '8px', height: '8px', borderRadius: '50%', backgroundColor: '#ef4444' }}></div>\r\n                  <span>No Analysis</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          }\r\n          style={{ marginBottom: '20px' }}\r\n        >\r\n          <div style={{ width: '100%', height: '450px', overflowX: 'auto' }}>\r\n            <div ref={mainChartRef} style={{ width: '100%', height: '450px' }}></div>\r\n          </div>\r\n        </Card>\r\n      </Card>\r\n\r\n      {/* Date Range Modal */}\r\n      <Modal\r\n        title=\"Select Date Range\"\r\n        visible={dateRangeModal}\r\n        onOk={handleDateRangeSubmit}\r\n        onCancel={() => setDateRangeModal(false)}\r\n      >\r\n        <div style={{ marginBottom: '16px' }}>\r\n          <label>Start Date:</label>\r\n          <DatePicker\r\n            showTime\r\n            value={modalStartDate ? moment(modalStartDate) : null}\r\n            onChange={(date) => setModalStartDate(date)}\r\n            style={{ width: '100%', marginTop: '8px' }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <label>End Date:</label>\r\n          <DatePicker\r\n            showTime\r\n            value={modalEndDate ? moment(modalEndDate) : null}\r\n            onChange={(date) => setModalEndDate(date)}\r\n            style={{ width: '100%', marginTop: '8px' }}\r\n          />\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SensorAnalysis;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANCSURBVHgB7VVNSFRRFP7um5dmCU0gZCDkIkipQEixRYtctRIKZyaFQocIUionyJWFCrVoEc74R1GgQaGoocEEQoRCLRRdKAkVuDBo4SJqqBEGZ967fe/OjD8wozNjtig/uPPu3HPu/c4595xzgV386xApaY147Fgxq2ET5TBlUXSnCEFiEprxDI6uT0gTWxMPeuqgyXaS2AFJMrHEXQFKCjnssVP6aFQbLngXkSK0TaXDHi+E7IVJImHUI6gdxrK9GLqogNN3EBGjjAb1cdTBkOOMTCFSRHKPhzyt9LCFGqMww5ehZZ2GlM2UnI1pfKPMrzwNc03gCfWXEBQn4fYGkJHHynKSSszjw5wTIqsL0jy3jtRCnvI0IqexfGCAkXFzrQC5shMpIDGxQVL1FZU4UXKHnp6i6utVucQCx+KqATnfS/BL+CkY4/9LGGzIR9rEvS17+XueYwL7bUF60sj5AnTMrimZY9zpV1MhJ3nn5cg1qac9iMr1i0ib2N0W4n3dg9CaEAqXqmwWLJtoFsfJh1lW0QiYCDLT8zirhlyZUZkvRCnSJrZQ5XsIR/sMDziiQipIGJZXVBQk58ImYJMBFQlNkAwkEkVw9QRVuVl3nRGx1TAs7Au/4kG3OIoZUge/cyTwqfCbWi1M0cQ8mIpGQy7FTrQzJyLYAnrC1Yj8iKGbo/jJO9PlSHRRQNW0BRk3W15bt2uABpdwr13de0YeA2yBohoh1aH8SAUG7rOeHTEjJ7ZST0JsPoXVDnPRDM2sX1c6SSBbka0FGYFGpevseIuMiJ2dL2i1laG3EbY5eI8VXH2eQJOtVFxHdqhbtUxJUw3hRgrQk0oicMKGcWZvO0umADLMRMq6C5tZRIJDTKDPfJnmgaxSrORMc62Qhj5CjW8CKWDz1+nljQJmbz9nZ5R3kuUEOcVvgGV0jLvZvzmgciGiHJHiKlzeYWyLOA7raRSyFht7NSG/sqT6oJuPYRjseHve8ERGR5SRfHb7xHH0sr5zzAJomg5b+Aequr9sNLDhKIQ+zmNzeRU1cHWM/RniVNDPl00338XIK0n+Hn+F2MKa5/nJwr4zxBvJE3quYafg6uGbHalQFSDkceziv8Nv8F43RRMAsBQAAAAASUVORK5CYII=\""],"sourceRoot":""}