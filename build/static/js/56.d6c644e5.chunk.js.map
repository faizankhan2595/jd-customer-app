{"version":3,"sources":["views/app-views/machine-and-sensor/sensor-analysis/index.js","assets/images/Mask group.png"],"names":["Option","Select","SensorAnalysis","_metricConfig$selecte","_metricConfig$selecte2","isFreeUser","parseInt","localStorage","getItem","mainChartRef","useRef","spectrumChartRef","spectrumChartRefX","multiSpectrum3AxisRefX","multiSpectrum1AxisRef","history","useHistory","machineId","sensorId","useParams","selectedMetricType","setSelectedMetricType","useState","selectedAxis","setSelectedAxis","selectedAlarm","setSelectedAlarm","sensorsData","setSensorsData","selectorDate","setSelectorDate","dateRangeModal","setDateRangeModal","modalStartDate","setModalStartDate","modalEndDate","setModalEndDate","startDate","setStartDate","moment","subtract","format","endDate","setEndDate","rawData","setRawData","loading","setLoading","mid_freq_acceleration_p2p_x","setMid_freq_acceleration_p2p_x","mid_freq_acceleration_p2p_y","setMid_freq_acceleration_p2p_y","mid_freq_acceleration_p2p_z","setMid_freq_acceleration_p2p_z","high_freq_acceleration_p2p_x","setHigh_freq_acceleration_p2p_x","mid_freq_displacement_x","setMid_freq_displacement_x","mid_freq_displacement_y","setMid_freq_displacement_y","mid_freq_displacement_z","setMid_freq_displacement_z","mid_freq_velocity_x","setMid_freq_velocity_x","mid_freq_velocity_y","setMid_freq_velocity_y","mid_freq_velocity_z","setMid_freq_velocity_z","mid_freq_env_x","setMid_freq_env_x","mid_freq_env_y","setMid_freq_env_y","mid_freq_env_z","setMid_freq_env_z","inclination_x","setInclination_x","inclination_y","setInclination_y","inclination_z","setInclination_z","motorServiceTemperature","setMotorServiceTemperature","batteryPercentage","setBatteryPercentage","batteryVoltage","setBatteryVoltage","rssi","setRssi","lastZoomTime","setLastZoomTime","current","spectrumData","setSpectrumData","spectrumLoading","setSpectrumLoading","selectedPoint","setSelectedPoint","showSpectrum","setShowSpectrum","is3AxisSpectrum","setIs3AxisSpectrum","spectrumDataX","setSpectrumDataX","spectrumDataY","setSpectrumDataY","spectrumDataZ","setSpectrumDataZ","hasMultipleSpectrums","setHasMultipleSpectrums","spectrum3AxisData","setSpectrum3AxisData","x","y","z","spectrum1AxisData","setSpectrum1AxisData","availableFiles","setAvailableFiles","metricConfig","label","axes","unit","colors","fileMapping","fetchAllSpectrumData","async","console","log","pointData","message","error","dataIndex","findIndex","item","datetime","recordData","files","file_0","trim","push","type","path","file_1","length","spectrumPromises","map","file","fetchSingleSpectrumData","spectrumResults","Promise","all","has3Axis","has1Axis","tempSpectrum3AxisData","tempSpectrum1AxisData","forEach","result","index","success","data","x_axis","parseFloat","y_axis","z_axis","binFilePath","expectedType","cleanBinFile","replace","apiUrl","axiosInstance","get","convertToHighchartsData","useCallback","Date","getTime","convertSpectrumToHighchartsData","createMainChart","title","color","window","Highcharts","chart","destroy","chartData","stockChart","height","text","xAxis","yAxis","series","name","point","events","click","e","pointIndex","this","originalData","tooltip","xDateFormat","plotOptions","line","marker","enabled","createSpectrumChart","slice","zoomType","lineWidth","legend","states","hover","lineWidthPlus","create3AxisSpectrumCharts","dataX","dataY","dataZ","subtitle","gridLineWidth","shared","crosshairs","formatter","toFixed","points","toExponential","createMultiSpectrumCharts","spectrum3Axis","spectrum1Axis","useEffect","fetchSensorsData","fetchSensorData","response","items","sensor_id","start_date","end_date","_item$file_","toDate","extraValue","_item$file_2","file_2","_item$file_3","_item$file_4","high_freq_acceleration_p2p_z","_item$file_5","_item$file_6","_item$file_7","_item$file_8","_item$file_9","_item$file_10","_item$file_11","_item$file_12","_item$file_13","_item$file_14","_item$file_15","_item$file_16","temperature","battery_percentage","battery_voltage","RSSI","_currentConfig$colors","currentConfig","currentColor","currentUnit","chartTitle","toUpperCase","setTimeout","_jsxs","style","padding","children","_jsx","marginBottom","Button","onClick","Card","display","alignItems","gap","src","SeriesImage","alt","fontWeight","fontSize","disabled","url","API_BASE_URL","open","download","width","value","onChange","start","end","placeholder","setItem","sensor_type","sensor_id_label","justifyContent","size","background","borderRadius","_Fragment","overflowX","ref","flexDirection","Object","entries","_ref","key","config","_metricConfig$value","availableAxes","handleMetricTypeChange","border","cursor","backgroundColor","transition","filter","axis","_metricConfig$selecte3","_metricConfig$selecte4","minWidth","Modal","visible","onOk","handleDateRangeSubmit","onCancel","DatePicker","showTime","date","marginTop"],"mappings":"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","file":"static/js/56.d6c644e5.chunk.js","sourcesContent":["import React, { useState, useEffect, useMemo, useCallback, useRef } from \"react\";\r\nimport { Card, Button, Select, Modal, DatePicker, message } from \"antd\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport { axiosInstance } from \"App\";\r\nimport { API_BASE_URL } from \"constants/ApiConstant\";\r\nimport SeriesImage from \"assets/images/Mask group.png\";\r\n\r\nconst { Option } = Select;\r\n\r\nconst SensorAnalysis = () => {\r\n  // Check if current user is a free user (role id 5)\r\n  const userRole = parseInt(localStorage.getItem(\"role\"));\r\n  const isFreeUser = userRole === 5;\r\n\r\n  // Highcharts chart refs\r\n  const mainChartRef = useRef(null);\r\n  const spectrumChartRef = useRef(null);\r\n  \r\n  // 3-axis spectrum chart refs for _0.bin files\r\n  const spectrumChartRefX = useRef(null);\r\n  const spectrumChartRefY = useRef(null);\r\n  const spectrumChartRefZ = useRef(null);\r\n  \r\n  // Multi-spectrum chart refs (for cases with both 3-axis and 1-axis)\r\n  const multiSpectrum3AxisRefX = useRef(null);\r\n  const multiSpectrum3AxisRefY = useRef(null);\r\n  const multiSpectrum3AxisRefZ = useRef(null);\r\n  const multiSpectrum1AxisRef = useRef(null);\r\n  const history = useHistory();\r\n  const { machineId, sensorId } = useParams();\r\n  const [selectedMetricType, setSelectedMetricType] = useState(\"mid_freq_acceleration_p2p\");\r\n  const [selectedAxis, setSelectedAxis] = useState(\"x\");\r\n  const [selectedAlarm, setSelectedAlarm] = useState(sensorId);\r\n  const [sensorsData, setSensorsData] = useState([]);\r\n  const [selectorDate, setSelectorDate] = useState(\"1\");\r\n  const [dateRangeModal, setDateRangeModal] = useState(false);\r\n  const [modalStartDate, setModalStartDate] = useState(null);\r\n  const [modalEndDate, setModalEndDate] = useState(null);\r\n  const [startDate, setStartDate] = useState(moment().subtract(1, 'days').format('YYYY-MM-DD hh:mm:ss'));\r\n  const [endDate, setEndDate] = useState(moment().format('YYYY-MM-DD hh:mm:ss'));\r\n  const [rawData, setRawData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Analysis data states\r\n  const [mid_freq_acceleration_p2p_x, setMid_freq_acceleration_p2p_x] = useState([]);\r\n  const [mid_freq_acceleration_p2p_y, setMid_freq_acceleration_p2p_y] = useState([]);\r\n  const [mid_freq_acceleration_p2p_z, setMid_freq_acceleration_p2p_z] = useState([]);\r\n  const [high_freq_acceleration_p2p_x, setHigh_freq_acceleration_p2p_x] = useState([]);\r\n\r\n  const [mid_freq_displacement_x, setMid_freq_displacement_x] = useState([]);\r\n  const [mid_freq_displacement_y, setMid_freq_displacement_y] = useState([]);\r\n  const [mid_freq_displacement_z, setMid_freq_displacement_z] = useState([]);\r\n\r\n  const [mid_freq_velocity_x, setMid_freq_velocity_x] = useState([]);\r\n  const [mid_freq_velocity_y, setMid_freq_velocity_y] = useState([]);\r\n  const [mid_freq_velocity_z, setMid_freq_velocity_z] = useState([]);\r\n\r\n  const [mid_freq_env_x, setMid_freq_env_x] = useState([]);\r\n  const [mid_freq_env_y, setMid_freq_env_y] = useState([]);\r\n  const [mid_freq_env_z, setMid_freq_env_z] = useState([]);\r\n\r\n  const [inclination_x, setInclination_x] = useState([]);\r\n  const [inclination_y, setInclination_y] = useState([]);\r\n  const [inclination_z, setInclination_z] = useState([]);\r\n\r\n  const [motorServiceTemperature, setMotorServiceTemperature] = useState([]);\r\n  const [batteryPercentage, setBatteryPercentage] = useState([]);\r\n  const [batteryVoltage, setBatteryVoltage] = useState([]);\r\n  const [rssi, setRssi] = useState([]);\r\n  const [lastZoomTime, setLastZoomTime] = useState({ current: 0 });\r\n\r\n  // Spectrum chart states\r\n  const [spectrumData, setSpectrumData] = useState([]);\r\n  const [spectrumLoading, setSpectrumLoading] = useState(false);\r\n  const [selectedPoint, setSelectedPoint] = useState(null);\r\n  const [showSpectrum, setShowSpectrum] = useState(false);\r\n  \r\n  // 3-axis spectrum data for _0.bin files\r\n  const [is3AxisSpectrum, setIs3AxisSpectrum] = useState(false);\r\n  const [spectrumDataX, setSpectrumDataX] = useState([]);\r\n  const [spectrumDataY, setSpectrumDataY] = useState([]);\r\n  const [spectrumDataZ, setSpectrumDataZ] = useState([]);\r\n\r\n  // Multiple spectrum data (for records that have both _0.bin and _1.bin files)\r\n  const [hasMultipleSpectrums, setHasMultipleSpectrums] = useState(false);\r\n  const [spectrum3AxisData, setSpectrum3AxisData] = useState({ x: [], y: [], z: [] });\r\n  const [spectrum1AxisData, setSpectrum1AxisData] = useState([]);\r\n  const [availableFiles, setAvailableFiles] = useState([]);\r\n\r\n  // Metric configuration\r\n  const metricConfig = {\r\n    \"mid_freq_acceleration_p2p\": {\r\n      label: \"Mid Freq Acceleration\",\r\n      axes: [\"x\", \"y\", \"z\"],\r\n      unit: \"(mm/s²)\",\r\n      colors: { x: \"#ef4444\", y: \"#3b82f6\", z: \"#10b981\" },\r\n      fileMapping: { x: \"file_1\", y: \"file_2\", z: \"file_0\" }\r\n    },\r\n    \"high_freq_acceleration_p2p\": {\r\n      label: \"High Freq Acceleration\", \r\n      axes: [\"z\"],\r\n      unit: \"(mm/s²)\",\r\n      colors: { z: \"#f59e0b\" },\r\n      fileMapping: { z: \"file_0\" }\r\n    },\r\n    \"mid_freq_velocity\": {\r\n      label: \"Mid Freq Velocity\",\r\n      axes: [\"x\", \"y\", \"z\"],\r\n      unit: \"(mm/s)\",\r\n      colors: { x: \"#ef4444\", y: \"#3b82f6\", z: \"#10b981\" },\r\n      fileMapping: { x: \"file_1\", y: \"file_2\", z: \"file_0\" }\r\n    },\r\n    \"mid_freq_displacement\": {\r\n      label: \"Mid Freq Displacement\",\r\n      axes: [\"x\", \"y\", \"z\"],\r\n      unit: \"(μm)\",\r\n      colors: { x: \"#ef4444\", y: \"#3b82f6\", z: \"#10b981\" },\r\n      fileMapping: { x: \"file_1\", y: \"file_2\", z: \"file_0\" }\r\n    },\r\n    \"inclination\": {\r\n      label: \"Inclination\",\r\n      axes: [\"x\", \"y\", \"z\"],\r\n      unit: \"(degrees)\",\r\n      colors: { x: \"#ef4444\", y: \"#3b82f6\", z: \"#10b981\" },\r\n      fileMapping: { x: \"file_1\", y: \"file_2\", z: \"file_0\" }\r\n    },\r\n    \"mid_freq_env\": {\r\n      label: \"Mid Freq Envelope\",\r\n      axes: [\"x\", \"y\", \"z\"],\r\n      unit: \"(Hz)\",\r\n      colors: { x: \"#ef4444\", y: \"#3b82f6\", z: \"#10b981\" },\r\n      fileMapping: { x: \"file_1\", y: \"file_2\", z: \"file_0\" }\r\n    },\r\n    \"temperature\": {\r\n      label: \"Temperature\",\r\n      axes: [\"\"],\r\n      unit: \"(°C)\",\r\n      colors: { \"\": \"#f59e0b\" },\r\n      fileMapping: { \"\": null }\r\n    },\r\n    \"battery_voltage\": {\r\n      label: \"Voltage\", \r\n      axes: [\"\"],\r\n      unit: \"(V)\",\r\n      colors: { \"\": \"#10b981\" },\r\n      fileMapping: { \"\": null }\r\n    },\r\n    \"battery_percentage\": {\r\n      label: \"Battery %\",\r\n      axes: [\"\"],\r\n      unit: \"(%)\",\r\n      colors: { \"\": \"#3b82f6\" },\r\n      fileMapping: { \"\": null }\r\n    },\r\n    \"RSSI\": {\r\n      label: \"RSSI\",\r\n      axes: [\"\"],\r\n      unit: \"(dBm)\",\r\n      colors: { \"\": \"#8b5cf6\" },\r\n      fileMapping: { \"\": null }\r\n    }\r\n  };\r\n\r\n  // Get current data based on selected metric and axis\r\n  const getCurrentChartData = () => {\r\n    const stateMap = {\r\n      \"mid_freq_acceleration_p2p_x\": mid_freq_acceleration_p2p_x,\r\n      \"mid_freq_acceleration_p2p_y\": mid_freq_acceleration_p2p_y,\r\n      \"mid_freq_acceleration_p2p_z\": mid_freq_acceleration_p2p_z,\r\n      \"high_freq_acceleration_p2p_z\": high_freq_acceleration_p2p_x,\r\n      \"mid_freq_velocity_x\": mid_freq_velocity_x,\r\n      \"mid_freq_velocity_y\": mid_freq_velocity_y,\r\n      \"mid_freq_velocity_z\": mid_freq_velocity_z,\r\n      \"mid_freq_displacement_x\": mid_freq_displacement_x,\r\n      \"mid_freq_displacement_y\": mid_freq_displacement_y,\r\n      \"mid_freq_displacement_z\": mid_freq_displacement_z,\r\n      \"inclination_x\": inclination_x,\r\n      \"inclination_y\": inclination_y,\r\n      \"inclination_z\": inclination_z,\r\n      \"mid_freq_env_x\": mid_freq_env_x,\r\n      \"mid_freq_env_y\": mid_freq_env_y,\r\n      \"mid_freq_env_z\": mid_freq_env_z,\r\n      \"temperature_\": motorServiceTemperature,\r\n      \"battery_voltage_\": batteryVoltage,\r\n      \"battery_percentage_\": batteryPercentage,\r\n      \"RSSI_\": rssi\r\n    };\r\n    \r\n    const key = `${selectedMetricType}_${selectedAxis}`;\r\n    return stateMap[key] || [];\r\n  };\r\n\r\n  // Get current metrics values for display\r\n  const getCurrentMetricsValues = () => {\r\n    if (rawData.length === 0) return {};\r\n    \r\n    const latestData = rawData[rawData.length - 1];\r\n    return {\r\n      temperature: latestData.temperature || \"N/A\",\r\n      battery_voltage: latestData.battery_voltage || \"N/A\", \r\n      battery_percentage: latestData.battery_percentage || \"N/A\",\r\n      rssi: latestData.rssi || \"N/A\"\r\n    };\r\n  };\r\n\r\n  // Enhanced function to fetch multiple spectrum data for a single point\r\n  const fetchAllSpectrumData = async (pointData) => {\r\n    console.log('fetchAllSpectrumData called with pointData:', pointData);\r\n    \r\n    // Free users can only access limited spectrum analysis\r\n    if (isFreeUser) {\r\n      message.error(\"Advanced spectrum analysis is available for premium users only\");\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setSpectrumLoading(true);\r\n      \r\n      // Reset all spectrum states\r\n      setHasMultipleSpectrums(false);\r\n      setIs3AxisSpectrum(false);\r\n      setSpectrumData([]);\r\n      setSpectrum3AxisData({ x: [], y: [], z: [] });\r\n      setSpectrum1AxisData([]);\r\n      setAvailableFiles([]);\r\n      \r\n      // Check which files are available in the rawData for this point\r\n      const dataIndex = rawData.findIndex(item => \r\n        moment(item.datetime).format('YYYY-MM-DD HH:mm:ss') === moment(pointData.x).format('YYYY-MM-DD HH:mm:ss')\r\n      );\r\n      \r\n      if (dataIndex === -1) {\r\n        message.error(\"Could not find data record for this point\");\r\n        return;\r\n      }\r\n      \r\n      const recordData = rawData[dataIndex];\r\n      const files = [];\r\n      \r\n      // Check for available binary files\r\n      if (recordData.file_0 && recordData.file_0.trim() !== '') {\r\n        files.push({ type: '_0.bin', path: recordData.file_0, label: '3-axis mid-frequency' });\r\n      }\r\n      if (recordData.file_1 && recordData.file_1.trim() !== '') {\r\n        files.push({ type: '_1.bin', path: recordData.file_1, label: '1-axis high-frequency' });\r\n      }\r\n      \r\n      console.log('Available files for analysis:', files);\r\n      setAvailableFiles(files);\r\n      \r\n      if (files.length === 0) {\r\n        message.error(\"No binary files available for spectrum analysis\");\r\n        return;\r\n      }\r\n      \r\n      // Fetch spectrum data for all available files\r\n      const spectrumPromises = files.map(file => fetchSingleSpectrumData(file.path, file.type));\r\n      const spectrumResults = await Promise.all(spectrumPromises);\r\n      \r\n      // Process results\r\n      let has3Axis = false;\r\n      let has1Axis = false;\r\n      let tempSpectrum3AxisData = { x: [], y: [], z: [] };\r\n      let tempSpectrum1AxisData = [];\r\n      \r\n      spectrumResults.forEach((result, index) => {\r\n        if (result.success) {\r\n          if (result.axes === 3) {\r\n            has3Axis = true;\r\n            tempSpectrum3AxisData = {\r\n              x: result.data.x_axis.map(item => [parseFloat(item.x), parseFloat(item.y)]),\r\n              y: result.data.y_axis.map(item => [parseFloat(item.x), parseFloat(item.y)]),\r\n              z: result.data.z_axis.map(item => [parseFloat(item.x), parseFloat(item.y)])\r\n            };\r\n          } else if (result.axes === 1) {\r\n            has1Axis = true;\r\n            tempSpectrum1AxisData = result.data.map(item => [parseFloat(item.x), parseFloat(item.y)]);\r\n          }\r\n        } else {\r\n          console.error(`Failed to process ${files[index].path}:`, result.error);\r\n        }\r\n      });\r\n      \r\n      // Set the spectrum data states\r\n      if (has3Axis) {\r\n        setSpectrum3AxisData(tempSpectrum3AxisData);\r\n      }\r\n      if (has1Axis) {\r\n        setSpectrum1AxisData(tempSpectrum1AxisData);\r\n      }\r\n      \r\n      // Set display flags\r\n      if (has3Axis && has1Axis) {\r\n        setHasMultipleSpectrums(true);\r\n        console.log('Multiple spectrums available: 3-axis + 1-axis');\r\n      } else if (has3Axis) {\r\n        setIs3AxisSpectrum(true);\r\n        setSpectrumDataX(tempSpectrum3AxisData.x);\r\n        setSpectrumDataY(tempSpectrum3AxisData.y); \r\n        setSpectrumDataZ(tempSpectrum3AxisData.z);\r\n        console.log('Single 3-axis spectrum available');\r\n      } else if (has1Axis) {\r\n        setIs3AxisSpectrum(false);\r\n        setSpectrumData(tempSpectrum1AxisData);\r\n        console.log('Single 1-axis spectrum available');\r\n      }\r\n      \r\n      setSelectedPoint(pointData);\r\n      setShowSpectrum(true);\r\n      \r\n    } catch (error) {\r\n      console.error(\"Error fetching spectrum data:\", error);\r\n      message.error(\"Error fetching spectrum data: \" + error.message);\r\n    } finally {\r\n      setSpectrumLoading(false);\r\n    }\r\n  };\r\n\r\n  // Helper function to fetch single spectrum data\r\n  const fetchSingleSpectrumData = async (binFilePath, expectedType) => {\r\n    const cleanBinFile = binFilePath?.replace(\"uploads/\", \"\");\r\n    const apiUrl = `api/getDataFromPythonScript?fileName=${cleanBinFile}`;\r\n    \r\n    console.log(`Fetching spectrum for: ${cleanBinFile} (expected: ${expectedType})`);\r\n    \r\n    const response = await axiosInstance.get(apiUrl);\r\n    return response.data;\r\n  };\r\n\r\n  // Helper function to convert data to Highcharts format (memoized)\r\n  const convertToHighchartsData = useCallback((data) => {\r\n    if (!data || data.length === 0) return [];\r\n    \r\n    return data.map((item, index) => {\r\n      return [\r\n        item.x instanceof Date ? item.x.getTime() : index, // Use timestamp for time series\r\n        item.y || 0\r\n      ];\r\n    });\r\n  }, []);\r\n\r\n  // Helper function to convert spectrum data to Highcharts format\r\n  const convertSpectrumToHighchartsData = useCallback((spectrumData) => {\r\n    if (!spectrumData || spectrumData.length === 0) return [];\r\n    \r\n    // Data is already in [[x, y], [x, y], ...] format from fetchSpectrumData\r\n    return spectrumData;\r\n  }, []);\r\n\r\n  // Create main chart with Highcharts\r\n  const createMainChart = useCallback((data, title, unit, color) => {\r\n    if (!mainChartRef.current || !window.Highcharts) return;\r\n\r\n    if (mainChartRef.current.chart) {\r\n      mainChartRef.current.chart.destroy();\r\n    }\r\n\r\n    const chartData = convertToHighchartsData(data);\r\n    \r\n    mainChartRef.current.chart = window.Highcharts.stockChart(mainChartRef.current, {\r\n      chart: {\r\n        height: 450\r\n      },\r\n      title: {\r\n        text: title\r\n      },\r\n      xAxis: {\r\n        type: 'datetime',\r\n        title: {\r\n          text: 'Time'\r\n        }\r\n      },\r\n      yAxis: {\r\n        title: {\r\n          text: `${title} ${unit}`\r\n        }\r\n      },\r\n      series: [{\r\n        name: title,\r\n        data: chartData,\r\n        color: color,\r\n        type: 'line',\r\n        point: {\r\n          events: {\r\n            click: function(e) {\r\n              const pointIndex = this.index;\r\n              const originalData = data[pointIndex];\r\n              \r\n              // Check if we have any binary files available for this point\r\n              // Use the new fetchAllSpectrumData to handle multiple files\r\n              fetchAllSpectrumData(originalData);\r\n            }\r\n          }\r\n        }\r\n      }],\r\n      tooltip: {\r\n        xDateFormat: '%Y-%m-%d %H:%M:%S'\r\n      },\r\n      plotOptions: {\r\n        line: {\r\n          marker: {\r\n            enabled: false\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }, [convertToHighchartsData, fetchAllSpectrumData]);\r\n\r\n  // Create spectrum chart with Highcharts\r\n  const createSpectrumChart = useCallback((spectrumData) => {\r\n    console.log('createSpectrumChart called with data length:', spectrumData ? spectrumData.length : 0);\r\n    console.log('spectrumChartRef.current:', spectrumChartRef.current);\r\n    console.log('window.Highcharts available:', !!window.Highcharts);\r\n    \r\n    if (!spectrumChartRef.current || !window.Highcharts) {\r\n      console.log('Missing ref or Highcharts, returning');\r\n      return;\r\n    }\r\n\r\n    if (spectrumChartRef.current.chart) {\r\n      console.log('Destroying existing chart');\r\n      spectrumChartRef.current.chart.destroy();\r\n    }\r\n\r\n    const chartData = convertSpectrumToHighchartsData(spectrumData);\r\n    console.log('Chart data prepared, length:', chartData.length);\r\n    console.log('Sample chart data:', chartData.slice(0, 3));\r\n    \r\n    try {\r\n      console.log('Creating Highcharts chart...');\r\n      spectrumChartRef.current.chart = window.Highcharts.chart(spectrumChartRef.current, {\r\n        chart: {\r\n          height: 450,\r\n          type: 'line',\r\n          zoomType: 'xy'\r\n        },\r\n        title: {\r\n          text: 'Amplitude Spectrum'\r\n        },\r\n        xAxis: {\r\n          title: {\r\n            text: 'Frequency (Hz)'\r\n          }\r\n        },\r\n        yAxis: {\r\n          title: {\r\n            text: 'Log Amplitude'\r\n          }\r\n        },\r\n        series: [{\r\n          name: 'Amplitude Spectrum',\r\n          data: chartData,\r\n          color: '#ef4444',\r\n          lineWidth: 2,\r\n          type: 'line'\r\n        }],\r\n        legend: {\r\n          enabled: false\r\n        },\r\n        plotOptions: {\r\n          line: {\r\n            marker: {\r\n              enabled: false\r\n            },\r\n            states: {\r\n              hover: {\r\n                lineWidthPlus: 1\r\n              }\r\n            }\r\n          }\r\n        },\r\n      });\r\n      console.log('Chart created successfully:', spectrumChartRef.current.chart);\r\n    } catch (error) {\r\n      console.error('Error creating spectrum chart:', error);\r\n    }\r\n  }, [convertSpectrumToHighchartsData]);\r\n\r\n  // Create combined 3-axis spectrum chart for _0.bin files\r\n  const create3AxisSpectrumCharts = useCallback((dataX, dataY, dataZ) => {\r\n    console.log('create3AxisSpectrumCharts called - creating single combined chart');\r\n    \r\n    if (!window.Highcharts) {\r\n      console.log('Highcharts not available');\r\n      return;\r\n    }\r\n\r\n    // Create single combined chart with all 3 axes\r\n    if (spectrumChartRefX.current) {\r\n      if (spectrumChartRefX.current.chart) {\r\n        spectrumChartRefX.current.chart.destroy();\r\n      }\r\n      \r\n      spectrumChartRefX.current.chart = window.Highcharts.chart(spectrumChartRefX.current, {\r\n        chart: { height: 450, type: 'line', zoomType: 'xy' },\r\n        title: { text: '3-Axis Mid-Frequency Spectrum Analysis' },\r\n        subtitle: { text: 'Combined X, Y, Z axes (fs=6664Hz, nperseg=4096)' },\r\n        xAxis: { \r\n          title: { text: 'Frequency (Hz)' },\r\n          gridLineWidth: 1\r\n        },\r\n        yAxis: { \r\n          title: { text: 'Log Amplitude (m/s²)²/Hz' },\r\n          gridLineWidth: 1\r\n        },\r\n        series: [{\r\n          name: 'X-Axis PSD',\r\n          data: dataX,\r\n          color: '#ef4444',\r\n          lineWidth: 2,\r\n          type: 'line'\r\n        }, {\r\n          name: 'Y-Axis PSD',\r\n          data: dataY,\r\n          color: '#3b82f6',\r\n          lineWidth: 2,\r\n          type: 'line'\r\n        }, {\r\n          name: 'Z-Axis PSD',\r\n          data: dataZ,\r\n          color: '#10b981',\r\n          lineWidth: 2,\r\n          type: 'line'\r\n        }],\r\n        legend: { enabled: true },\r\n        plotOptions: {\r\n          line: {\r\n            marker: { enabled: false },\r\n            states: { hover: { lineWidthPlus: 1 } }\r\n          }\r\n        },\r\n        tooltip: {\r\n          shared: true,\r\n          crosshairs: true,\r\n          formatter: function() {\r\n            let tooltip = `<b>Frequency: ${this.x.toFixed(2)} Hz</b><br/>`;\r\n            this.points.forEach(point => {\r\n              tooltip += `<span style=\"color:${point.color}\">${point.series.name}: ${point.y.toExponential(2)}</span><br/>`;\r\n            });\r\n            return tooltip;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  // Create multi-spectrum charts (both 3-axis and 1-axis for same data point)\r\n  const createMultiSpectrumCharts = useCallback((spectrum3Axis, spectrum1Axis) => {\r\n    console.log('createMultiSpectrumCharts called');\r\n    \r\n    if (!window.Highcharts) {\r\n      console.log('Highcharts not available');\r\n      return;\r\n    }\r\n\r\n    // Create single combined 3-axis chart\r\n    if (multiSpectrum3AxisRefX.current) {\r\n      if (multiSpectrum3AxisRefX.current.chart) {\r\n        multiSpectrum3AxisRefX.current.chart.destroy();\r\n      }\r\n      \r\n      multiSpectrum3AxisRefX.current.chart = window.Highcharts.chart(multiSpectrum3AxisRefX.current, {\r\n        chart: { height: 420, type: 'line', zoomType: 'xy' },\r\n        title: { text: '3-Axis Mid-Frequency Spectrum Analysis' },\r\n        subtitle: { text: 'Combined X, Y, Z axes (fs=6664Hz, nperseg=4096)' },\r\n        xAxis: { \r\n          title: { text: 'Frequency (Hz)' },\r\n          gridLineWidth: 1\r\n        },\r\n        yAxis: { \r\n          title: { text: 'Log Amplitude (m/s²)²/Hz' },\r\n          gridLineWidth: 1\r\n        },\r\n        series: [{\r\n          name: 'X-Axis PSD',\r\n          data: spectrum3Axis.x,\r\n          color: '#ef4444',\r\n          lineWidth: 2,\r\n          type: 'line'\r\n        }, {\r\n          name: 'Y-Axis PSD',\r\n          data: spectrum3Axis.y,\r\n          color: '#3b82f6',\r\n          lineWidth: 2,\r\n          type: 'line'\r\n        }, {\r\n          name: 'Z-Axis PSD',\r\n          data: spectrum3Axis.z,\r\n          color: '#10b981',\r\n          lineWidth: 2,\r\n          type: 'line'\r\n        }],\r\n        legend: { enabled: true },\r\n        plotOptions: {\r\n          line: {\r\n            marker: { enabled: false },\r\n            states: { hover: { lineWidthPlus: 1 } }\r\n          }\r\n        },\r\n        tooltip: {\r\n          shared: true,\r\n          crosshairs: true,\r\n          formatter: function() {\r\n            let tooltip = `<b>Frequency: ${this.x.toFixed(2)} Hz</b><br/>`;\r\n            this.points.forEach(point => {\r\n              tooltip += `<span style=\"color:${point.color}\">${point.series.name}: ${point.y.toExponential(2)}</span><br/>`;\r\n            });\r\n            return tooltip;\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // Create single-axis high-frequency chart\r\n    if (multiSpectrum1AxisRef.current) {\r\n      if (multiSpectrum1AxisRef.current.chart) {\r\n        multiSpectrum1AxisRef.current.chart.destroy();\r\n      }\r\n      \r\n      multiSpectrum1AxisRef.current.chart = window.Highcharts.chart(multiSpectrum1AxisRef.current, {\r\n        chart: { height: 370, type: 'line', zoomType: 'xy' },\r\n        title: { text: '1-Axis High-Frequency Spectrum Analysis' },\r\n        subtitle: { text: 'Single axis (fs=2560Hz, nperseg=65536)' },\r\n        xAxis: { \r\n          title: { text: 'Frequency (Hz)' }\r\n        },\r\n        yAxis: { title: { text: 'Log Amplitude' } },\r\n        series: [{\r\n          name: '1-Axis PSD',\r\n          data: spectrum1Axis,\r\n          color: '#f59e0b',\r\n          lineWidth: 2,\r\n          type: 'line'\r\n        }],\r\n        legend: { enabled: false },\r\n        plotOptions: {\r\n          line: {\r\n            marker: { enabled: false },\r\n            states: { hover: { lineWidthPlus: 1 } }\r\n          }\r\n        },\r\n        tooltip: {\r\n          formatter: function() {\r\n            return `<b>Frequency: ${this.x.toFixed(2)} Hz</b><br/>Amplitude: ${this.y.toExponential(2)}`;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchSensorsData();\r\n    if (sensorId) {\r\n      setSelectedAlarm(sensorId);\r\n      fetchSensorData(sensorId, startDate, endDate);\r\n    }\r\n  }, [machineId, sensorId]);\r\n\r\n  const fetchSensorsData = async () => {\r\n    try {\r\n      const response = await axiosInstance.get(`api/web/machines/${machineId}/sensors`);\r\n      setSensorsData(response.data.items || []);\r\n    } catch (error) {\r\n      console.error(\"Error fetching sensors data:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchSensorData = async (sensor_id, start_date, end_date) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axiosInstance.get(`api/machine-data?machine_id=${machineId}&deviceID=${sensor_id}&start_date=${start_date}&end_date=${end_date}`);\r\n      const rawData = response.data.data;\r\n      setRawData(rawData);\r\n\r\n      // Process all chart data with proper number parsing and file mapping\r\n      setMid_freq_acceleration_p2p_x(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_acceleration_p2p_x) || 0,\r\n            extraValue: item.file_1?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_acceleration_p2p_y(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_acceleration_p2p_y) || 0,\r\n            extraValue: item.file_2?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_acceleration_p2p_z(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_acceleration_p2p_z) || 0,\r\n            extraValue: item.file_0?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setHigh_freq_acceleration_p2p_x(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.high_freq_acceleration_p2p_z) || 0,\r\n            extraValue: item.file_0?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_displacement_x(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_displacement_x) || 0,\r\n            extraValue: item.file_1?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_displacement_y(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_displacement_y) || 0,\r\n            extraValue: item.file_2?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_displacement_z(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_displacement_z) || 0,\r\n            extraValue: item.file_0?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_velocity_x(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_velocity_x) || 0,\r\n            extraValue: item.file_1?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_velocity_y(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_velocity_y) || 0,\r\n            extraValue: item.file_2?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_velocity_z(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_velocity_z) || 0,\r\n            extraValue: item.file_0?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_env_x(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_env_x) || 0,\r\n            extraValue: item.file_1?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_env_y(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_env_y) || 0,\r\n            extraValue: item.file_2?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setMid_freq_env_z(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.mid_freq_env_z) || 0,\r\n            extraValue: item.file_0?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setInclination_x(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.inclination_x) || 0,\r\n            extraValue: item.file_1?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setInclination_y(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.inclination_y) || 0,\r\n            extraValue: item.file_2?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setInclination_z(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.inclination_z) || 0,\r\n            extraValue: item.file_0?.replace(\"uploads/\", \"\"),\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      // Additional chart data - using correct field names from API\r\n      setMotorServiceTemperature(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.temperature) || 0, // API uses 'temperature' not 'motor_service_temperature'\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setBatteryPercentage(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.battery_percentage) || 0,\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setBatteryVoltage(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.battery_voltage) || 0,\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n      setRssi(() => {\r\n        const data = rawData.map((item) => {\r\n          return {\r\n            x: moment(item.datetime).toDate(),\r\n            y: parseFloat(item.RSSI) || 0, // API uses 'RSSI' (uppercase) not 'rssi'\r\n          }\r\n        })\r\n        return data\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching sensor data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleMetricTypeChange = (value) => {\r\n    setSelectedMetricType(value);\r\n    // Reset axis to first available axis for the selected metric\r\n    const availableAxes = metricConfig[value]?.axes || [\"x\"];\r\n    setSelectedAxis(availableAxes[0]);\r\n  };\r\n\r\n  const handleAxisChange = (value) => {\r\n    setSelectedAxis(value);\r\n  };\r\n\r\n  const download = async (sensor_id, start_date, end_date) => {\r\n    if (rawData.length === 0) {\r\n      message.error(\"No data found\");\r\n      return;\r\n    }\r\n    let url = `${API_BASE_URL}/api/downloadMultipleRawFilesAndZipAndServe?machine_id=${machineId}&deviceID=${sensor_id}&start_date=${start_date}&end_date=${end_date}`;\r\n    window.open(url, '_blank');\r\n  };\r\n\r\n  const handleDateRangeSubmit = () => {\r\n    if (modalStartDate && modalEndDate) {\r\n      const start = moment(modalStartDate).format('YYYY-MM-DD hh:mm:ss');\r\n      const end = moment(modalEndDate).format('YYYY-MM-DD hh:mm:ss');\r\n      setStartDate(start);\r\n      setEndDate(end);\r\n      setSelectorDate(\"Date-Range\");\r\n      if (selectedAlarm) {\r\n        fetchSensorData(selectedAlarm, start, end);\r\n      }\r\n    }\r\n    setDateRangeModal(false);\r\n  };\r\n\r\n  // Update main chart when data changes\r\n  useEffect(() => {\r\n    const chartData = getCurrentChartData();\r\n    const currentConfig = metricConfig[selectedMetricType];\r\n    const currentColor = currentConfig?.colors?.[selectedAxis] || \"#ef4444\";\r\n    const currentUnit = currentConfig?.unit || \"\";\r\n    const chartTitle = `${currentConfig?.label || \"\"} ${selectedAxis.toUpperCase()}`;\r\n    \r\n    if (chartData.length > 0) {\r\n      createMainChart(chartData, chartTitle, currentUnit, currentColor);\r\n    }\r\n  }, [selectedMetricType, selectedAxis, rawData, createMainChart]);\r\n\r\n  // Update spectrum chart when spectrum data changes (single-axis)\r\n  useEffect(() => {\r\n    if (spectrumData && spectrumData.length > 0 && showSpectrum && !is3AxisSpectrum && !hasMultipleSpectrums) {\r\n      console.log('Creating single-axis spectrum chart with data length:', spectrumData.length);\r\n      // Add a small delay to ensure the DOM element is rendered\r\n      setTimeout(() => {\r\n        createSpectrumChart(spectrumData);\r\n      }, 100);\r\n    }\r\n  }, [spectrumData, createSpectrumChart, showSpectrum, is3AxisSpectrum, hasMultipleSpectrums]);\r\n\r\n  // Update 3-axis spectrum chart when data changes\r\n  useEffect(() => {\r\n    if (is3AxisSpectrum && showSpectrum && !hasMultipleSpectrums && \r\n        spectrumDataX && spectrumDataX.length > 0 && \r\n        spectrumDataY && spectrumDataY.length > 0 && \r\n        spectrumDataZ && spectrumDataZ.length > 0) {\r\n      console.log('Creating 3-axis spectrum chart');\r\n      setTimeout(() => {\r\n        create3AxisSpectrumCharts(spectrumDataX, spectrumDataY, spectrumDataZ);\r\n      }, 100);\r\n    }\r\n  }, [spectrumDataX, spectrumDataY, spectrumDataZ, create3AxisSpectrumCharts, showSpectrum, is3AxisSpectrum, hasMultipleSpectrums]);\r\n\r\n  // Update multi-spectrum charts when data changes\r\n  useEffect(() => {\r\n    if (hasMultipleSpectrums && showSpectrum && \r\n        spectrum3AxisData && spectrum1AxisData && spectrum1AxisData.length > 0) {\r\n      console.log('Creating multi-spectrum charts');\r\n      setTimeout(() => {\r\n        createMultiSpectrumCharts(spectrum3AxisData, spectrum1AxisData);\r\n      }, 100);\r\n    }\r\n  }, [spectrum3AxisData, spectrum1AxisData, createMultiSpectrumCharts, showSpectrum, hasMultipleSpectrums]);\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      <div style={{ marginBottom: '20px' }}>\r\n        <Button onClick={() => history.push(`/app/machine-and-sensors/machine-details/${machineId}`)}>← Back to Machine Details</Button>\r\n      </div>\r\n      \r\n      <Card>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          marginBottom: '20px',\r\n          gap: '15px'\r\n        }}>\r\n          <div><img src={SeriesImage} alt=\"Series\" /></div>\r\n          <div style={{\r\n            fontWeight: 'bold',\r\n            fontSize: '16px'\r\n          }}>Sensor Analysis {isFreeUser && <span style={{ color: '#f59e0b' }}>(Limited Features)</span>}</div>\r\n          <div>\r\n            <Button \r\n              type=\"primary\" \r\n              disabled={rawData.length === 0} \r\n              loading={loading} \r\n              onClick={() => download(selectedAlarm, startDate, endDate)}\r\n            >\r\n              Acquire Raw Data\r\n            </Button>\r\n          </div>\r\n\r\n          <div style={{ width: '200px' }}>\r\n            <Select \r\n              value={selectorDate} \r\n              onChange={(e) => {\r\n                if (e === \"Date Range\") {\r\n                  setDateRangeModal(true);\r\n                  return;\r\n                }\r\n                setSelectorDate(e);\r\n                let start, end;\r\n                if (e === \"1\") {\r\n                  start = moment().subtract(1, 'days').format('YYYY-MM-DD hh:mm:ss');\r\n                  end = moment().format('YYYY-MM-DD hh:mm:ss');\r\n                } else if (e === \"7\") {\r\n                  start = moment().subtract(7, 'days').format('YYYY-MM-DD hh:mm:ss');\r\n                  end = moment().format('YYYY-MM-DD hh:mm:ss');\r\n                } else if (e === \"30\") {\r\n                  start = moment().subtract(30, 'days').format('YYYY-MM-DD hh:mm:ss');\r\n                  end = moment().format('YYYY-MM-DD hh:mm:ss');\r\n                } else if (e === \"60\") {\r\n                  start = moment().subtract(60, 'days').format('YYYY-MM-DD hh:mm:ss');\r\n                  end = moment().format('YYYY-MM-DD hh:mm:ss');\r\n                }\r\n                setStartDate(start);\r\n                setEndDate(end);\r\n                if (selectedAlarm) {\r\n                  fetchSensorData(selectedAlarm, start, end);\r\n                }\r\n              }} \r\n              style={{ width: '100%' }}\r\n            >\r\n              <Select.Option value=\"1\">1 Day</Select.Option>\r\n              <Select.Option value=\"7\">7 Day</Select.Option>\r\n              <Select.Option value=\"30\">30 Day</Select.Option>\r\n              <Select.Option value=\"60\">60 Day</Select.Option>\r\n              <Select.Option value=\"Date Range\">Date Range</Select.Option>\r\n            </Select>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ width: \"300px\", marginBottom: \"30px\" }}>\r\n          <Select \r\n            value={selectedAlarm}\r\n            placeholder=\"Select Sensor\"\r\n            onChange={(e) => {\r\n              setSelectedAlarm(e);\r\n              localStorage.setItem('deviceId2', e);\r\n              fetchSensorData(e, startDate, endDate);\r\n            }}\r\n            style={{ width: \"100%\" }}\r\n          >\r\n            {sensorsData.map((item) => (\r\n              <Option key={item.sensor_id} value={item.sensor_id}>\r\n                {item.sensor_type + \" #\" + (item.sensor_id_label !== null ? item.sensor_id_label : item.sensor_id)}\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </div>\r\n\r\n        {/* Spectrum Chart - shown when a point is clicked */}\r\n        {showSpectrum && (\r\n          <Card \r\n            title={\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <span>\r\n                  {hasMultipleSpectrums ? \r\n                    `Analysis` :\r\n                    is3AxisSpectrum ? \r\n                      `3-Axis Combined Spectrum (${spectrumDataX ? spectrumDataX.length : 0} points per axis)` : \r\n                      `Amplitude Spectrum (${spectrumData ? spectrumData.length : 0} points)`\r\n                  }\r\n                </span>\r\n                <Button size=\"small\" onClick={() => setShowSpectrum(false)}>✕ Close</Button>\r\n              </div>\r\n            }\r\n            style={{ marginBottom: '20px' }}\r\n            loading={spectrumLoading}\r\n          >\r\n            {selectedPoint && (\r\n              <div style={{ marginBottom: '15px', padding: '10px', background: '#f0f2f5', borderRadius: '6px' }}>\r\n                <div><strong>Time:</strong> {moment(selectedPoint.x).format('DD-MM-YYYY HH:mm:ss')}</div>\r\n                <div><strong>Value:</strong> {selectedPoint.y}</div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Single spectrum charts (either 3-axis OR 1-axis, not both) */}\r\n            {!hasMultipleSpectrums && is3AxisSpectrum && (\r\n              <>\r\n                <div style={{ marginBottom: '20px' }}>\r\n                  <h3 style={{ color: '#1890ff', marginBottom: '15px' }}>3-Axis Mid-Frequency Spectrum Analysis</h3>\r\n                  <div style={{ width: '100%', height: '470px', overflowX: 'auto' }}>\r\n                    <div ref={spectrumChartRefX} style={{ width: '100%', height: '470px' }}></div>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {!hasMultipleSpectrums && !is3AxisSpectrum && (\r\n              <>\r\n                <div style={{ marginBottom: '20px' }}>\r\n                  <h3 style={{ color: '#fa8c16', marginBottom: '15px' }}>1-Axis High-Frequency Spectrum Analysis</h3>\r\n                  <div style={{ width: '100%', height: '470px', overflowX: 'auto' }}>\r\n                    <div ref={spectrumChartRef} style={{ width: '100%', height: '470px' }}></div>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {/* Multi-spectrum charts (both 3-axis and 1-axis for same data point) */}\r\n            {hasMultipleSpectrums && (\r\n              <>\r\n                <div style={{ marginBottom: '20px' }}>\r\n                  <h3 style={{ color: '#1890ff', marginBottom: '15px' }}>Mid-Frequency Analysis</h3>\r\n                  <div style={{ width: '100%', height: '420px', overflowX: 'auto' }}>\r\n                    <div ref={multiSpectrum3AxisRefX} style={{ width: '100%', height: '420px' }}></div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '20px' }}>\r\n                  <h3 style={{ color: '#fa8c16', marginBottom: '15px' }}>High-Frequency Analysis</h3>\r\n                  <div style={{ width: '100%', height: '370px', overflowX: 'auto' }}>\r\n                    <div ref={multiSpectrum1AxisRef} style={{ width: '100%', height: '370px' }}></div>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </Card>\r\n        )}\r\n\r\n        {/* Single Trend chart */}\r\n        <Card \r\n          title={\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\r\n              {/* First row: Trend title and Metric Type Toggle Buttons */}\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                <span>Trend</span>\r\n                <div style={{ display: 'flex', gap: '5px' }}>\r\n                  {Object.entries(metricConfig).map(([key, config]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => handleMetricTypeChange(key)}\r\n                      style={{\r\n                        padding: '4px 12px',\r\n                        fontSize: '12px',\r\n                        border: 'none',\r\n                        borderRadius: '15px',\r\n                        cursor: 'pointer',\r\n                        backgroundColor: selectedMetricType === key ? '#1890ff' : 'rgba(255, 255, 255, 0.1)',\r\n                        color: selectedMetricType === key ? 'white' : '#666',\r\n                        transition: 'all 0.2s ease'\r\n                      }}\r\n                    >\r\n                      {config.label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Second row: Axis Toggle Buttons (center aligned) */}\r\n              {(metricConfig[selectedMetricType]?.axes || []).filter(axis => axis !== \"\").length > 0 && (\r\n                <div style={{ display: 'flex', justifyContent: 'center', gap: '10px' }}>\r\n                  {(metricConfig[selectedMetricType]?.axes || []).filter(axis => axis !== \"\").map((axis) => (\r\n                    <button\r\n                      key={axis}\r\n                      onClick={() => handleAxisChange(axis)}\r\n                      style={{\r\n                        padding: '6px 16px',\r\n                        fontSize: '14px',\r\n                        fontWeight: '600',\r\n                        border: 'none',\r\n                        borderRadius: '15px',\r\n                        cursor: 'pointer',\r\n                        backgroundColor: selectedAxis === axis ? metricConfig[selectedMetricType]?.colors?.[axis] || '#1890ff' : 'rgba(255, 255, 255, 0.1)',\r\n                        color: selectedAxis === axis ? 'white' : '#666',\r\n                        transition: 'all 0.2s ease',\r\n                        minWidth: '45px'\r\n                      }}\r\n                    >\r\n                      {axis.toUpperCase()}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          }\r\n          style={{ marginBottom: '20px' }}\r\n        >\r\n          <div style={{ width: '100%', height: '450px', overflowX: 'auto' }}>\r\n            <div ref={mainChartRef} style={{ width: '100%', height: '450px' }}></div>\r\n          </div>\r\n        </Card>\r\n      </Card>\r\n\r\n      {/* Date Range Modal */}\r\n      <Modal\r\n        title=\"Select Date Range\"\r\n        visible={dateRangeModal}\r\n        onOk={handleDateRangeSubmit}\r\n        onCancel={() => setDateRangeModal(false)}\r\n      >\r\n        <div style={{ marginBottom: '16px' }}>\r\n          <label>Start Date:</label>\r\n          <DatePicker\r\n            showTime\r\n            value={modalStartDate ? moment(modalStartDate) : null}\r\n            onChange={(date) => setModalStartDate(date)}\r\n            style={{ width: '100%', marginTop: '8px' }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <label>End Date:</label>\r\n          <DatePicker\r\n            showTime\r\n            value={modalEndDate ? moment(modalEndDate) : null}\r\n            onChange={(date) => setModalEndDate(date)}\r\n            style={{ width: '100%', marginTop: '8px' }}\r\n          />\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SensorAnalysis;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANCSURBVHgB7VVNSFRRFP7um5dmCU0gZCDkIkipQEixRYtctRIKZyaFQocIUionyJWFCrVoEc74R1GgQaGoocEEQoRCLRRdKAkVuDBo4SJqqBEGZ967fe/OjD8wozNjtig/uPPu3HPu/c4595xzgV386xApaY147Fgxq2ET5TBlUXSnCEFiEprxDI6uT0gTWxMPeuqgyXaS2AFJMrHEXQFKCjnssVP6aFQbLngXkSK0TaXDHi+E7IVJImHUI6gdxrK9GLqogNN3EBGjjAb1cdTBkOOMTCFSRHKPhzyt9LCFGqMww5ehZZ2GlM2UnI1pfKPMrzwNc03gCfWXEBQn4fYGkJHHynKSSszjw5wTIqsL0jy3jtRCnvI0IqexfGCAkXFzrQC5shMpIDGxQVL1FZU4UXKHnp6i6utVucQCx+KqATnfS/BL+CkY4/9LGGzIR9rEvS17+XueYwL7bUF60sj5AnTMrimZY9zpV1MhJ3nn5cg1qac9iMr1i0ib2N0W4n3dg9CaEAqXqmwWLJtoFsfJh1lW0QiYCDLT8zirhlyZUZkvRCnSJrZQ5XsIR/sMDziiQipIGJZXVBQk58ImYJMBFQlNkAwkEkVw9QRVuVl3nRGx1TAs7Au/4kG3OIoZUge/cyTwqfCbWi1M0cQ8mIpGQy7FTrQzJyLYAnrC1Yj8iKGbo/jJO9PlSHRRQNW0BRk3W15bt2uABpdwr13de0YeA2yBohoh1aH8SAUG7rOeHTEjJ7ZST0JsPoXVDnPRDM2sX1c6SSBbka0FGYFGpevseIuMiJ2dL2i1laG3EbY5eI8VXH2eQJOtVFxHdqhbtUxJUw3hRgrQk0oicMKGcWZvO0umADLMRMq6C5tZRIJDTKDPfJnmgaxSrORMc62Qhj5CjW8CKWDz1+nljQJmbz9nZ5R3kuUEOcVvgGV0jLvZvzmgciGiHJHiKlzeYWyLOA7raRSyFht7NSG/sqT6oJuPYRjseHve8ERGR5SRfHb7xHH0sr5zzAJomg5b+Aequr9sNLDhKIQ+zmNzeRU1cHWM/RniVNDPl00338XIK0n+Hn+F2MKa5/nJwr4zxBvJE3quYafg6uGbHalQFSDkceziv8Nv8F43RRMAsBQAAAAASUVORK5CYII=\""],"sourceRoot":""}