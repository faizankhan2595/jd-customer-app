(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[58],{1424:function(e,t,a){"use strict";a.r(t);var i=a(639),o=a(97),s=a(637),n=a(578),r=a.n(n),l=a(0),c=a(696),d=a.n(c),x=a(1);var p=function(e){let{series:t,title:a,label:o}=e,n=t.map(((e,t)=>({x:e.x,y:Number(e.y)})));const r=t.filter((e=>!isNaN(e.y))).sort(((e,t)=>t.y-e.y)).slice(0,3),l=["#FF0000","#00FF00","#0000FF"],c={series:[{name:"Amplitude",data:n}],options:{chart:{type:"line",zoom:{enabled:!0,type:"x",autoScaleYaxis:!0},animations:{enabled:!1},markers:{size:0}},dataLabels:{enabled:!1},yaxis:{labels:{formatter:function(e){return isNaN(e)?"N/A":Math.round(e)}},title:{text:"Amplitude",style:{fontSize:"14px",fontWeight:"normal"}}},stroke:{curve:"straight",width:1},xaxis:{type:"numeric",min:Math.min(...n.map((e=>e.x))),max:Math.max(...n.map((e=>e.x))),labels:{formatter:function(e){return Math.round(e)},show:!0},tickAmount:6,title:{text:"Frequency (Hz)",style:{fontSize:"14px",fontWeight:"normal"}}},tooltip:{x:{formatter:e=>`Frequency #${Math.round(e)}`},y:{formatter:e=>`${e}`}},annotations:{points:r.map(((e,t)=>({x:e.x,y:e.y,marker:{size:6,fillColor:l[t],strokeColor:"#000000",radius:2},label:{text:`#${t+1}: ${Math.round(e.y)}`,borderColor:"#000",offsetY:0,style:{color:"#fff",background:l[t]}}})))}}},p=[{render:(e,t,a)=>Object(x.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:l[a]}})},{title:"Frequency (Hz)",dataIndex:"x",key:"point",render:e=>e.toFixed(2)},{title:"Amplitude",dataIndex:"y",key:"amplitude",render:(e,t,a)=>Object(x.jsx)("div",{style:{fontWeight:"bold"},children:e})}];return Object(x.jsxs)("div",{style:{display:"flex",gap:"20px"},children:[Object(x.jsxs)(i.a,{style:{flex:1},children:[Object(x.jsx)("div",{style:{fontWeight:"bold",fontSize:"17px",color:"#000000"},children:a}),Object(x.jsx)(d.a,{options:c.options,series:c.series,type:"line",height:370}),Object(x.jsx)("div",{style:{fontWeight:"bold",fontSize:"12px",color:"#72849A",textAlign:"center",marginTop:"10px"},children:o})]}),Object(x.jsx)(i.a,{style:{width:"20%"},children:Object(x.jsx)(s.a,{dataSource:r,columns:p,pagination:!1,size:"small",rowKey:"x"})})]})};var y=function(e){let{frequencyData:t=[],title:a="Amplitude Spectrum"}=e;const{optimizedData:o,sortedPoints:n,yMin:r,yMax:c,xMin:p,xMax:y}=Object(l.useMemo)((()=>{if(!Array.isArray(t)||0===t.length)return{optimizedData:[],sortedPoints:[],yMin:1,yMax:1e5,xMin:0,xMax:4e4};const e=t.filter((e=>e&&!isNaN(e.x)&&!isNaN(e.y)&&e.y>0));let a=e.map((e=>e.x)),i=e.map((e=>e.y));const o=a.length?Math.max(0,Math.min(...a)):0,s=a.length?1.05*Math.max(...a):4e4,n=i.length?Math.max(1e-16,.1*Math.min(...i)):1,r=i.length?10*Math.max(...i):1e5,l=[...e].sort(((e,t)=>t.y-e.y)).slice(0,3);let c=e;if(e.length>5e3){const t=[...e].sort(((e,t)=>t.y-e.y)).slice(0,100),a=new Set(t.map((e=>e.x))),i=(s-o)/2e3,n={};for(const s of e){if(a.has(s.x))continue;const e=Math.floor((s.x-o)/i);n[e]||(n[e]=[]),n[e].push(s)}const r=Object.values(n).map((e=>0===e.length?null:e.reduce(((e,t)=>t.y>e.y?t:e),e[0]))).filter(Boolean);c=[...t,...r]}return{optimizedData:c,sortedPoints:l,yMin:n,yMax:r,xMin:o,xMax:s}}),[t]),m=["#FF0000","#00FF00","#0000FF"],u={chart:{type:"scatter",zoom:{enabled:!0,type:"xy"},animations:{enabled:!1},toolbar:{show:!0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}},background:"#FFFFFF"},dataLabels:{enabled:!1},markers:{size:2,opacity:.8,strokeWidth:0},yaxis:{type:"log",min:r,max:c,labels:{formatter:function(e){return e.toExponential(0)}},title:{text:"Amplitude",style:{fontSize:"14px",fontWeight:"normal"}},logarithmic:!0,forceNiceScale:!0},xaxis:{type:"numeric",min:p,max:y,tickAmount:8,labels:{formatter:function(e){return e.toExponential(0)}},title:{text:"Frequency (Hz)",style:{fontSize:"14px",fontWeight:"normal"}}},tooltip:{x:{formatter:e=>`${e.toFixed(2)} Hz`},y:{formatter:e=>`${e.toExponential(2)}`},shared:!1,intersect:!0,followCursor:!1},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}},borderColor:"#E0E0E0",strokeDashArray:0},annotations:{points:n.map(((e,t)=>({x:e.x,y:e.y,marker:{size:6,fillColor:m[t],strokeColor:"#000000",radius:2},label:{text:`#${t+1}: ${e.y.toExponential(2)}`,borderColor:"#000",offsetY:0,style:{color:"#fff",background:m[t]}}})))}},h=[{render:(e,t,a)=>Object(x.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:m[a]}})},{title:"Frequency (Hz)",dataIndex:"x",key:"frequency",render:e=>e.toFixed(2)},{title:"Amplitude",dataIndex:"y",key:"amplitude",render:e=>Object(x.jsx)("div",{style:{fontWeight:"bold"},children:e.toExponential(2)})}],b=Object(l.useMemo)((()=>[{name:"Amplitude",data:o}]),[o]);return Object(x.jsxs)("div",{style:{display:"flex",gap:"20px"},children:[Object(x.jsxs)(i.a,{style:{flex:1},children:[Object(x.jsx)("div",{style:{fontWeight:"bold",fontSize:"17px",color:"#000000"},children:a}),Object(x.jsx)(d.a,{options:u,series:b,type:"scatter",height:370})]}),n.length>0&&Object(x.jsx)(i.a,{style:{width:"20%"},children:Object(x.jsx)(s.a,{dataSource:n,columns:h,pagination:!1,size:"small",rowKey:(e,t)=>`peak-${t}`})})]})},m=a(140);t.default=function(){const{id:e,graphType:t,deviceId:a,bin:s,xAxis:n,yAxis:c}=Object(m.useParams)(),[d,u]=Object(l.useState)([]),[h,b]=Object(l.useState)([]),[f,j]=Object(l.useState)([]),[g,O]=Object(l.useState)([]),[M,F]=Object(l.useState)(""),[z,S]=Object(l.useState)(!1),[k,A]=Object(l.useState)(!0),[v,w]=Object(l.useState)(null);Object(l.useEffect)((()=>{if(s){const e=s.split(".")[0],t=e.split("_")[e.split("_").length-1];S(1!=t)}D()}),[s]);const D=async()=>{try{A(!0);const e=await o.axiosInstance.get(`api/getDataFromPythonScript?fileName=${s}`);if(console.log("API Response:",e.data),e.data.success)if(F(e.data.fileType||"three_axis"),"single_axis"===e.data.fileType)O(e.data.frequencyDomain.frequencies.map(((e,t)=>({x:t+1,y:e})))),j(e.data.timeDomain.data.map(((e,t)=>({x:t+1,y:e}))));else{const t=e.data.timeDomain.subSeries;u((()=>t[0].data.map(((e,t)=>({x:t+1,y:e}))))),b((()=>t[1].data.map(((e,t)=>({x:t+1,y:e}))))),j((()=>t[2].data.map(((e,t)=>({x:t+1,y:e})))))}}catch(v){console.error("Error fetching data:",v),w("Error fetching data: "+v.message)}finally{A(!1)}};return k?Object(x.jsx)("div",{children:"Loading data..."}):v?Object(x.jsxs)("div",{children:["Error: ",v]}):Object(x.jsxs)("div",{children:[Object(x.jsxs)(i.a,{children:[Object(x.jsx)("div",{style:{fontWeight:"bold",color:"#000000"},children:s}),Object(x.jsxs)("div",{children:["X: ",r()(n).format("DD-MM-YYYY HH:mm:ss")]}),Object(x.jsxs)("div",{children:["Y: ",c]})]}),g&&g.length>0&&Object(x.jsx)(y,{frequencyData:g,title:"Amplitude Spectrum"}),z&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(p,{graphType:t,title:"Amplitude X",series:d}),Object(x.jsx)(p,{graphType:t,title:"Amplitude Y",series:h})]}),Object(x.jsx)(p,{graphType:t,title:"Amplitude Z",series:f})]})}}}]);
//# sourceMappingURL=58.1433464d.chunk.js.map