(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[59],{1382:function(e,t,a){"use strict";a.r(t);var c=a(703),s=a(544),n=a(679),i=a(554),d=a(550),l=a(697),r=a.n(l),j=a(571),o=a(588),m=a(532),b=a(189),x=a(232),h=a(534),O=a(109),u=a(637),y=a(328),f=a(0),v=a(141),g=a(613),p=a(125),k=(a(1069),a(578)),w=a.n(k),I=a(1);t.default=()=>{const e=Object(g.useHistory)(),t=Object(g.useParams)(),[a,l]=Object(f.useState)([]),k=[{title:"Event ID",dataIndex:"id",key:"id",render:e=>Object(I.jsxs)("div",{children:["#",e]})},{title:"Name",dataIndex:"name",key:"name",render:e=>Object(I.jsx)("div",{children:e||"Unnamed Event"})},{title:"Date Received",dataIndex:"created_at",key:"created_at",render:e=>Object(I.jsx)("div",{children:w()(e).format("DD-MM-YYYY")})},{title:"Date Requested",dataIndex:"created_at",key:"created_at",render:e=>Object(I.jsx)("div",{children:w()(e).format("DD-MM-YYYY")})},{title:"Status",dataIndex:"status",key:"status",render:e=>Object(I.jsx)(j.a,{color:"Pending"===e?"yellow":"green",children:e||"Submitted"})},{title:"Action",key:"action",render:(e,t)=>Object(I.jsx)(o.b,{size:"middle",children:Object(I.jsx)(m.a,{overlay:N(t),trigger:["hover"],children:Object(I.jsx)(c.a,{})})})}],N=e=>Object(I.jsxs)(b.a,{children:[Object(I.jsxs)(b.a.Item,{onClick:()=>D(e.id),children:[Object(I.jsx)(s.a,{})," Edit"]},"edit"),Object(I.jsxs)(b.a.Item,{onClick:()=>E(e.id),children:[Object(I.jsx)(n.a,{})," Delete"]},"view")]}),D=async t=>{e.push(`/app/machine-and-sensors/machine-details/life-cycle-management/edit-life-cycle-event/${t}`)},E=async e=>{console.log("fetch called");const t=await p.axiosInstance.delete(`api/admin/life-cycle-event/${e}/delete`);console.log(t.data.items),t.data.status?(x.b.success("Event deleted successfully"),Y()):x.b.success("Event cannot be deleted")},Y=async()=>{let e=(await p.axiosInstance.get(`api/admin/life-cycle-event/list?machine_id=${t.id}`)).data.items;e&&l([...e])};return Object(f.useEffect)((()=>{Y()}),[]),Object(I.jsxs)("div",{children:[Object(I.jsxs)("h4",{children:[" ",Object(I.jsx)(i.a,{}),Object(I.jsx)("span",{style:{color:"#6a6a6a",fontWeight:"300"},children:" Machine & Sensors / Sensors"})," / Past Analysis "]}),Object(I.jsxs)("div",{className:"d-flex justify-content-between mb-3 mt-4",children:[Object(I.jsxs)("div",{className:"",style:{display:"flex"},children:[Object(I.jsx)(o.b,{direction:"vertical",children:Object(I.jsx)(h.a,{placeholder:"Search",allowClear:!0,onChange:e=>{},style:{width:200},prefix:Object(I.jsx)(d.a,{style:{marginRight:8}})})}),Object(I.jsx)(O.a,{icon:Object(I.jsx)(r.a,{component:y.e}),className:"d-flex align-items-center ml-2",children:"Export"})]}),Object(I.jsxs)("div",{className:"mb-2 d-flex align-items-center",children:[Object(I.jsx)(O.a,{onClick:()=>{e.goBack()},className:"ml-3 d-flex align-items-center rounded font-weight-semibold px-4",children:"Back"}),Object(I.jsx)(O.a,{className:"ml-3 bg-primary d-flex align-items-center rounded text-white font-weight-semibold px-4",children:Object(I.jsx)(v.Link,{to:`/app/machine-and-sensors/machine-details/life-cycle-management/add-new-life-cycle-event/${t.id}`,children:"+ Add New Event"})})]})]}),Object(I.jsx)("div",{className:"mt-3",children:Object(I.jsx)(u.a,{columns:k,dataSource:a})})]})}}}]);
//# sourceMappingURL=59.8fd324a1.chunk.js.map