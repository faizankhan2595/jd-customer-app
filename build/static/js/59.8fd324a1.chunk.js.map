{"version":3,"sources":["views/app-views/machine-and-sensor/machine-details/view-past-event/index.js"],"names":["ViewPasEvent","history","useHistory","param","useParams","eventsData","setEventsData","useState","columns","title","dataIndex","key","render","item","_jsxs","children","name","_jsx","moment","format","status","Tag","color","text","record","Space","size","Dropdown","overlay","getMenu","trigger","MoreOutlined","Menu","Item","onClick","editLifecycleEvent","id","EditOutlined","deleteLifecycleEventHandler","DeleteOutlined","async","push","event_id","console","log","response","axiosInstance","delete","data","items","message","success","fetchData","get","useEffect","ToolOutlined","style","fontWeight","className","display","direction","Input","placeholder","allowClear","onChange","width","prefix","SearchOutlined","marginRight","Button","icon","Icon","component","CsvIcon","goback","goBack","Link","to","Table","dataSource"],"mappings":"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","file":"static/js/59.8fd324a1.chunk.js","sourcesContent":["import { EyeOutlined, MoreOutlined, SearchOutlined, ToolOutlined, EditOutlined, DeleteOutlined } from '@ant-design/icons'\r\nimport Icon from '@ant-design/icons/lib/components/Icon'\r\nimport { Button, Dropdown, Input, Menu, message, Space, Table, Tag } from 'antd'\r\nimport { CsvIcon } from 'assets/svg/icon'\r\nimport React, {useState, useEffect} from 'react'\r\nimport { Link } from 'react-router-dom/cjs/react-router-dom'\r\nimport { useHistory, useParams } from 'react-router-dom/cjs/react-router-dom.min'\r\nimport { axiosInstance } from \"App\";\r\nimport { render } from '@testing-library/react'\r\nimport moment from 'moment'\r\n\r\nconst data = [\r\n  {\r\n    eventId: 'EV001',\r\n    dateReceived: '2024-03-13',\r\n    dateRequested: '2024-03-10',\r\n    status: 'Pending',\r\n    \r\n  },\r\n  {\r\n    eventId: 'EV002',\r\n    dateReceived: '2024-03-12',\r\n    dateRequested: '2024-03-11',\r\n    status: 'Submitted',\r\n    \r\n  },\r\n  // Add more data as needed\r\n];\r\n\r\nconst ViewPasEvent = () => {\r\n    const history = useHistory()\r\n    const param = useParams();\r\n    const [eventsData, setEventsData] = useState([])\r\n    const goback = ()=>{\r\n        history.goBack();\r\n    }\r\n    const columns = [\r\n        {\r\n          title: 'Event ID',\r\n          dataIndex: 'id',\r\n          key: 'id',\r\n          render: (item) => <div>#{item}</div>\r\n        },\r\n        {\r\n          title: 'Name',\r\n          dataIndex: 'name',\r\n          key: 'name',\r\n          render: (name) => <div>{name || 'Unnamed Event'}</div>\r\n        },\r\n        {\r\n          title: 'Date Received',\r\n          dataIndex: 'created_at',\r\n          key: 'created_at',\r\n          render: (item) => <div>{moment(item).format('DD-MM-YYYY')}</div>\r\n        },\r\n        {\r\n          title: 'Date Requested',\r\n          dataIndex: 'created_at',\r\n          key: 'created_at',\r\n          render: (item) => <div>{moment(item).format('DD-MM-YYYY')}</div>\r\n        },\r\n        {\r\n          title: 'Status',\r\n          dataIndex: 'status',\r\n          key: 'status',\r\n          render: (status) => (\r\n            <Tag color={status === 'Pending' ? 'yellow' : 'green'}>{status || 'Submitted'}</Tag>\r\n          ),\r\n        },\r\n        {\r\n          title: 'Action',\r\n          key: 'action',\r\n          render: (text, record) => (\r\n            <Space size=\"middle\">\r\n              <Dropdown overlay={getMenu(record)} trigger={['hover']}>\r\n                <MoreOutlined />\r\n              </Dropdown>\r\n            </Space>\r\n          ),\r\n        },\r\n      ];\r\n      const getMenu = (record) => (\r\n        <Menu>\r\n          <Menu.Item key=\"edit\" onClick={() => editLifecycleEvent(record.id)}>\r\n            <EditOutlined /> Edit\r\n          </Menu.Item>\r\n          <Menu.Item key=\"view\" onClick={() => deleteLifecycleEventHandler(record.id)}>\r\n            <DeleteOutlined /> Delete\r\n          </Menu.Item>\r\n        </Menu>\r\n      );\r\n\r\n    const editLifecycleEvent = async (event_id) => {\r\n      history.push(`/app/machine-and-sensors/machine-details/life-cycle-management/edit-life-cycle-event/${event_id}`);\r\n    }\r\n\r\n    const deleteLifecycleEventHandler = async (event_id) => {\r\n      console.log(\"fetch called\")\r\n      const response = await axiosInstance.delete(`api/admin/life-cycle-event/${event_id}/delete`\r\n        // , { search: 'none' }\r\n      );\r\n      console.log(response.data.items)\r\n      let data = response.data;\r\n      if(data.status) {\r\n        message.success(\"Event deleted successfully\")\r\n        fetchData();\r\n      } else {\r\n        message.success(\"Event cannot be deleted\")\r\n      }\r\n    }\r\n\r\n    const fetchData = async () => {\r\n      const response = await axiosInstance.get(`api/admin/life-cycle-event/list?machine_id=${param.id}`);\r\n      let data = response.data.items;\r\n      if(data) {\r\n        setEventsData([\r\n          ...data\r\n        ])\r\n      }\r\n    }\r\n\r\n    useEffect(() => {\r\n      fetchData()\r\n    }, [])\r\n    \r\n  return (\r\n    <div>\r\n         <h4> <ToolOutlined /><span style={{\r\n                color: '#6a6a6a',\r\n                fontWeight: '300'\r\n            }}> Machine & Sensors / Sensors</span> / Past Analysis </h4>\r\n      <div className=\"d-flex justify-content-between mb-3 mt-4\">\r\n        <div className=\"\" style={{ display: \"flex\" }}>\r\n          <Space direction=\"vertical\">\r\n            <Input\r\n              placeholder=\"Search\"\r\n              allowClear\r\n              onChange={(text)=>{}}\r\n              style={{\r\n                width: 200,\r\n              }}\r\n              prefix={<SearchOutlined style={{ marginRight: 8 }} />}\r\n            />\r\n          </Space>\r\n          <Button icon={<Icon component={CsvIcon}/>} className=\"d-flex align-items-center ml-2\" >Export</Button>\r\n        </div>\r\n        <div className=\"mb-2 d-flex align-items-center\">\r\n          <Button\r\n            onClick={goback}\r\n            className=\"ml-3 d-flex align-items-center rounded font-weight-semibold px-4\"\r\n          >\r\n           Back\r\n          </Button>\r\n          <Button\r\n            // onClick={showModal}\r\n            className=\"ml-3 bg-primary d-flex align-items-center rounded text-white font-weight-semibold px-4\"\r\n          >\r\n            <Link to={`/app/machine-and-sensors/machine-details/life-cycle-management/add-new-life-cycle-event/${param.id}`}>\r\n              + Add New Event</Link>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <div className='mt-3'>\r\n      <Table columns={columns} dataSource={eventsData} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ViewPasEvent\r\n"],"sourceRoot":""}